{"version":3,"file":"play-arrow-filled-43482d1f.mjs","sources":["../../../common/resources/client/icons/material/KeyboardArrowLeft.tsx","../../../common/resources/client/icons/material/KeyboardArrowRight.tsx","../../../common/resources/client/utils/hooks/is-tablet-media-query.ts","../../../common/resources/client/ui/forms/toggle/switch.tsx","../../../common/resources/client/utils/keybinds/is-ctrl-key-pressed.ts","../../../common/resources/client/ui/tables/navigate-grid.ts","../../../common/resources/client/ui/tables/table-context.ts","../../../common/resources/client/ui/tables/style/use-table-cell-style.ts","../../../common/resources/client/ui/tables/table-cell.tsx","../../../common/resources/client/ui/interactions/use-pointer-events.ts","../../../common/resources/client/utils/keybinds/is-ctrl-or-shift-pressed.ts","../../../common/resources/client/ui/tables/style/use-table-row-style.ts","../../../common/resources/client/ui/tables/table-row.tsx","../../../common/resources/client/ui/tables/checkbox-column-config.tsx","../../../common/resources/client/icons/material/ArrowDownward.tsx","../../../common/resources/client/ui/tables/header-cell.tsx","../../../common/resources/client/ui/tables/table-header-row.tsx","../../../common/resources/client/ui/tables/table.tsx","../../../common/resources/client/ui/images/avatar.tsx","../../../common/resources/client/ui/forms/input-field/chip-field/chip-list.tsx","../../../common/resources/client/i18n/formatted-number.tsx","../../../common/resources/client/icons/material/Add.tsx","../../../common/resources/client/ui/interactions/dnd/drag-state.ts","../../../common/resources/client/ui/interactions/interactable-event.ts","../../../common/resources/client/ui/interactions/active-interaction.ts","../../../common/resources/client/ui/interactions/utils/dom-rect-to-obj.ts","../../../common/resources/client/ui/interactions/dnd/update-rects.ts","../../../common/resources/client/ui/interactions/dnd/use-draggable.ts","../../../common/resources/client/ui/interactions/dnd/read-files-from-data-transfer.ts","../../../common/resources/client/utils/array/async-iterable-to-array.ts","../../../common/resources/client/ui/interactions/dnd/use-droppable.ts","../../../common/resources/client/ui/interactions/dnd/sortable/sortable-line-strategy.ts","../../../common/resources/client/utils/array/move-item-in-array.ts","../../../common/resources/client/utils/array/move-item-in-new-array.ts","../../../common/resources/client/ui/interactions/dnd/sortable/sortable-transform-strategy.ts","../../../common/resources/client/ui/interactions/dnd/sortable/sortable-move-node-strategy.ts","../../../common/resources/client/ui/interactions/dnd/sortable/use-sortable.ts","../../../common/resources/client/ui/tabs/tabs-context.tsx","../../../common/resources/client/ui/tabs/tab-line.tsx","../../../common/resources/client/ui/tabs/tab-list.tsx","../../../common/resources/client/ui/tabs/tab.tsx","../../../common/resources/client/ui/tabs/tab-panels.tsx","../../../common/resources/client/ui/tabs/tabs.tsx","../../../common/resources/client/ui/interactions/dnd/drag-preview.tsx","../../../common/resources/client/icons/material/MusicNote.tsx","../../../resources/client/web-player/tracks/track-image/track-image.tsx","../../../common/resources/client/i18n/formatted-duration.tsx","../../../resources/client/web-player/tracks/track-link.tsx","../../../resources/client/web-player/genres/genre.ts","../../../resources/client/web-player/tracks/waveform/generate-waveform-data.ts","../../../resources/client/web-player/albums/assign-album-to-tracks.ts","../../../resources/client/web-player/tracks/requests/use-track.ts","../../../resources/client/web-player/tracks/hooks/use-track-permissions.ts","../../../common/resources/client/icons/material/Album.tsx","../../../resources/client/web-player/albums/album-image/album-image.tsx","../../../resources/client/web-player/albums/album-link.tsx","../../../resources/client/web-player/albums/album.ts","../../../resources/client/web-player/albums/requests/use-album.ts","../../../resources/client/web-player/albums/use-album-permissions.ts","../../../resources/client/web-player/backstage/use-primary-artist-for-current-user.ts","../../../resources/client/web-player/artists/artist-links.tsx","../../../common/resources/client/utils/urls/share-link-socially.ts","../../../common/resources/client/icons/social/tumblr.tsx","../../../common/resources/client/icons/material/Share.tsx","../../../resources/client/web-player/sharing/share-media-buttons.tsx","../../../common/resources/client/ui/images/user-avatar.tsx","../../../common/resources/client/utils/array/sort-array-of-objects.ts","../../../common/resources/client/ui/tables/use-sortable-table-data.ts","../../../resources/client/web-player/albums/requests/use-delete-album.ts","../../../resources/client/admin/artist-datatable-page/artist-form/profile-links-form.tsx","../../../resources/client/web-player/artists/requests/use-artist.ts","../../../resources/client/web-player/artists/use-artist-permissions.ts","../../../common/resources/client/ui/themes/utils/theme-value-to-hex.ts","../../../resources/client/web-player/tracks/play-arrow-filled.tsx"],"sourcesContent":["import {createSvgIcon} from '../create-svg-icon';\n\nexport const KeyboardArrowLeftIcon = createSvgIcon(\n  <path d=\"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z\" />\n, 'KeyboardArrowLeftOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const KeyboardArrowRightIcon = createSvgIcon(\n  <path d=\"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\" />\n, 'KeyboardArrowRightOutlined');\n","import {useMediaQuery, UseMediaQueryOptions} from './use-media-query';\n\nexport function useIsTabletMediaQuery(options?: UseMediaQueryOptions) {\n  return useMediaQuery('(max-width: 1024px)', options);\n}\n","import React, {ComponentPropsWithoutRef, ReactNode, useId} from 'react';\nimport clsx from 'clsx';\nimport {useController} from 'react-hook-form';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {InputSize} from '../input-field/input-size';\nimport {getInputFieldClassNames} from '../input-field/get-input-field-class-names';\nimport {AutoFocusProps, useAutoFocus} from '../../focus/use-auto-focus';\n\ninterface SwitchProps\n  extends AutoFocusProps,\n    Omit<ComponentPropsWithoutRef<'input'>, 'size'> {\n  size?: InputSize;\n  className?: string;\n  description?: ReactNode;\n  invalid?: boolean;\n  errorMessage?: string;\n  iconRight?: ReactNode;\n}\nexport const Switch = React.forwardRef<HTMLInputElement, SwitchProps>(\n  (props, ref) => {\n    const {\n      children,\n      size = 'sm',\n      description,\n      className,\n      invalid,\n      autoFocus,\n      errorMessage,\n      iconRight,\n      ...domProps\n    } = props;\n\n    const inputRef = useObjectRef(ref);\n    useAutoFocus({autoFocus}, inputRef);\n\n    const style = getSizeClassName(size);\n    const fieldClassNames = getInputFieldClassNames(props);\n\n    const descriptionId = useId();\n\n    return (\n      <div className={clsx(className, 'isolate')}>\n        <label className=\"flex select-none items-center\">\n          <input\n            {...domProps}\n            type=\"checkbox\"\n            role=\"switch\"\n            aria-invalid={invalid || undefined}\n            aria-describedby={description ? descriptionId : undefined}\n            ref={inputRef}\n            aria-checked={domProps.checked}\n            className={clsx(\n              style,\n              !invalid &&\n                'checked:border-primary checked:bg-primary dark:checked:border-primary-dark dark:checked:bg-primary-dark',\n              invalid && 'checked:border-danger checked:bg-danger',\n              'relative flex flex-shrink-0 cursor-pointer appearance-none items-center overflow-hidden rounded-3xl border border-chip bg-chip p-0 outline-none transition-colors checked:border-primary checked:bg-primary',\n              'before:z-10 before:block before:translate-x-2 before:rounded-3xl before:border before:bg-white before:transition-transform',\n              'checked:before:border-white',\n              'focus-visible:ring',\n              props.disabled && 'cursor-not-allowed opacity-80',\n            )}\n          />\n          {children && (\n            <span\n              className={clsx(\n                fieldClassNames.size.font,\n                'ml-12',\n                invalid && 'text-danger',\n                props.disabled && 'text-disabled',\n              )}\n            >\n              {children}\n            </span>\n          )}\n          {iconRight}\n        </label>\n        {description && !errorMessage && (\n          <div id={descriptionId} className={fieldClassNames.description}>\n            {description}\n          </div>\n        )}\n        {errorMessage && (\n          <div id={descriptionId} className={fieldClassNames.error}>\n            {errorMessage}\n          </div>\n        )}\n      </div>\n    );\n  },\n);\n\ninterface FormSwitchProps extends SwitchProps {\n  name: string;\n}\nexport function FormSwitch(props: FormSwitchProps) {\n  const {\n    field: {onChange, onBlur, value = false, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<SwitchProps> = {\n    onChange: e => {\n      if (e.target.value && e.target.value !== 'on') {\n        onChange(e.target.checked ? e.target.value : false);\n      } else {\n        onChange(e);\n      }\n    },\n    onBlur,\n    checked: !!value,\n    invalid,\n    errorMessage: error?.message,\n    name: props.name,\n  };\n\n  return <Switch ref={ref} {...mergeProps(props, formProps)} />;\n}\n\nfunction getSizeClassName(size: InputSize): string {\n  switch (size) {\n    case 'xl':\n      return 'w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36';\n    case 'lg':\n      return 'w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30';\n    case 'md':\n      return 'w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24';\n    case 'xs':\n      return 'w-30 h-18 before:w-12 before:h-12 checked:before:translate-x-14';\n    default:\n      return 'w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20';\n  }\n}\n","import {isMac} from '@react-aria/utils';\n\ninterface Event {\n  altKey: boolean;\n  ctrlKey: boolean;\n  metaKey: boolean;\n}\n\nexport function isCtrlKeyPressed(e: Event) {\n  if (isMac()) {\n    return e.metaKey;\n  }\n\n  return e.ctrlKey;\n}\n","import React, {KeyboardEventHandler} from 'react';\nimport {getFocusableTreeWalker} from '@react-aria/focus';\nimport {focusWithoutScrolling} from '@react-aria/utils';\nimport {isCtrlKeyPressed} from '../../utils/keybinds/is-ctrl-key-pressed';\n\ninterface Props {\n  cellCount: number;\n  rowCount: number;\n}\nexport function useGridNavigation(props: Props) {\n  const {cellCount, rowCount} = props;\n  const onKeyDown: KeyboardEventHandler<HTMLElement> = e => {\n    switch (e.key) {\n      case 'ArrowLeft':\n        focusSiblingCell(e, {cell: {op: 'decrement'}}, props);\n        break;\n      case 'ArrowRight':\n        focusSiblingCell(e, {cell: {op: 'increment'}}, props);\n        break;\n      case 'ArrowUp':\n        focusSiblingCell(e, {row: {op: 'decrement'}}, props);\n        break;\n      case 'ArrowDown':\n        focusSiblingCell(e, {row: {op: 'increment'}}, props);\n        break;\n      case 'PageUp':\n        focusSiblingCell(e, {row: {op: 'decrement', count: 5}}, props);\n        break;\n      case 'PageDown':\n        focusSiblingCell(e, {row: {op: 'increment', count: 5}}, props);\n        break;\n      case 'Tab':\n        focusFirstElementAfterGrid(e);\n        break;\n      case 'Home':\n        if (isCtrlKeyPressed(e)) {\n          // move to first cell in first row\n          focusSiblingCell(\n            e,\n            {\n              row: {op: 'decrement', count: rowCount},\n              cell: {op: 'decrement', count: cellCount},\n            },\n            props\n          );\n        } else {\n          // move to first cell in current row\n          focusSiblingCell(\n            e,\n            {cell: {op: 'decrement', count: cellCount}},\n            props\n          );\n        }\n        break;\n      case 'End':\n        if (isCtrlKeyPressed(e)) {\n          // move to last cell in last row\n          focusSiblingCell(\n            e,\n            {\n              row: {op: 'increment', count: rowCount},\n              cell: {op: 'increment', count: cellCount},\n            },\n            props\n          );\n        } else {\n          // move to last cell in current row\n          focusSiblingCell(\n            e,\n            {cell: {op: 'increment', count: cellCount}},\n            props\n          );\n        }\n        break;\n    }\n  };\n\n  return {onKeyDown};\n}\n\ninterface Operations {\n  cell?: {\n    op: 'increment' | 'decrement';\n    count?: number;\n  };\n  row?: {\n    op: 'increment' | 'decrement';\n    count?: number;\n  };\n}\nfunction focusSiblingCell(\n  e: React.KeyboardEvent,\n  operations: Operations,\n  {cellCount, rowCount}: Props\n) {\n  if (document.activeElement?.tagName === 'input') return;\n  e.preventDefault();\n  const grid = e.currentTarget as HTMLElement;\n\n  // focused element might be inside the cell and not the cell itself\n  const currentCell = (e.target as HTMLElement).closest('[aria-colindex]');\n  if (!currentCell || !grid) return;\n\n  const row = currentCell.closest('[aria-rowindex]');\n  if (!row) return;\n\n  // grab row and cell index from aria attributes\n  let rowIndex = parseInt(row.getAttribute('aria-rowindex') as string);\n  let cellIndex = parseInt(currentCell.getAttribute('aria-colindex') as string);\n  if (Number.isNaN(rowIndex) || Number.isNaN(cellIndex)) return;\n\n  // adjust row index for next cell selector\n  const rowOpCount = operations.row?.count ?? 1;\n  if (operations.row?.op === 'increment') {\n    rowIndex = Math.min(rowCount, rowIndex + rowOpCount);\n  } else if (operations.row?.op === 'decrement') {\n    rowIndex = Math.max(1, rowIndex - rowOpCount);\n  }\n\n  // adjust cell index for next cell selector\n  const cellOpCount = operations.cell?.count ?? 1;\n  if (operations.cell?.op === 'increment') {\n    cellIndex = Math.min(cellCount, cellIndex + cellOpCount);\n  } else if (operations.cell?.op === 'decrement') {\n    cellIndex = Math.max(1, cellIndex - cellOpCount);\n  }\n\n  // find the next cell that should be focused\n  const nextCell = grid.querySelector(\n    `[aria-rowindex=\"${rowIndex}\"] [aria-colindex=\"${cellIndex}\"]`\n  ) as HTMLElement | undefined;\n  if (!nextCell) return;\n\n  // find any focusable elements inside the cell\n  const walker = getFocusableTreeWalker(nextCell);\n  const nextFocusableElement = (walker.nextNode() || nextCell) as HTMLElement;\n\n  // adjust tab index on current and next cells and focus either next cell or first focusable element inside that cell\n  currentCell.setAttribute('tabindex', '-1');\n  nextFocusableElement.setAttribute('tabindex', '0');\n  nextFocusableElement.focus();\n}\n\n// grid is treated as a single tab stop, focus first element after grid, instead of moving focus withing grid on tab press\nfunction focusFirstElementAfterGrid(e: React.KeyboardEvent) {\n  const grid = e.currentTarget as HTMLElement;\n  if (e.shiftKey) {\n    grid.focus();\n  } else {\n    const walker = getFocusableTreeWalker(grid, {tabbable: true});\n    let next: HTMLElement;\n    let last: HTMLElement;\n    do {\n      last = walker.lastChild() as HTMLElement;\n      if (last) {\n        next = last;\n      }\n    } while (last);\n\n    // @ts-ignore\n    if (next && !next.contains(document.activeElement)) {\n      focusWithoutScrolling(next);\n    }\n  }\n}\n","import {createContext} from 'react';\nimport type {SortDescriptor} from './types/sort-descriptor';\nimport type {TableProps} from './table';\nimport type {ColumnConfig} from '../../datatable/column-config';\nimport type {TableDataItem} from './types/table-data-item';\n\nexport type TableSelectionStyle = 'checkbox' | 'highlight';\n\nexport interface TableContextValue<T extends TableDataItem = TableDataItem> {\n  isCollapsedMode: boolean;\n  selectedRows: (string | number)[];\n  onSelectionChange: (keys: (string | number)[]) => void;\n  sortDescriptor?: SortDescriptor;\n  onSortChange?: (descriptor: SortDescriptor) => any;\n  enableSelection?: boolean;\n  enableSorting?: boolean;\n  selectionStyle: TableSelectionStyle;\n  data: T[];\n  meta?: any;\n  columns: ColumnConfig<T>[];\n  toggleRow: (item: T) => void;\n  selectRow: (item: T | null, merge?: boolean) => void;\n  hideBorder: boolean;\n  hideHeaderRow: boolean;\n  collapseOnMobile: boolean;\n  onAction: TableProps<T>['onAction'];\n  selectRowOnContextMenu: TableProps<T>['selectRowOnContextMenu'];\n  cellHeight: string | undefined;\n  headerCellHeight: string | undefined;\n}\nexport const TableContext = createContext<TableContextValue>(null!);\n","import clsx from 'clsx';\nimport {useContext} from 'react';\nimport {TableContext} from '@common/ui/tables/table-context';\n\ninterface Props {\n  index: number;\n  isHeader: boolean;\n}\nexport function useTableCellStyle({index, isHeader}: Props) {\n  const {\n    columns,\n    cellHeight = 'h-46',\n    headerCellHeight = 'h-46',\n  } = useContext(TableContext);\n  const column = columns[index];\n\n  const userPadding = column?.padding;\n\n  let justify = 'justify-start';\n  if (column?.align === 'center') {\n    justify = 'justify-center';\n  } else if (column?.align === 'end') {\n    justify = 'justify-end';\n  }\n\n  return clsx(\n    'flex items-center overflow-hidden whitespace-nowrap overflow-ellipsis outline-none focus-visible:outline focus-visible:outline-offset-2',\n    isHeader ? headerCellHeight : cellHeight,\n    column?.width ?? 'flex-1',\n    column?.maxWidth,\n    column?.minWidth,\n    justify,\n    userPadding,\n    column?.className\n  );\n}\n","import {useContext, useMemo} from 'react';\nimport {TableContext} from './table-context';\nimport {TableDataItem} from './types/table-data-item';\nimport {RowContext} from '@common/datatable/column-config';\nimport {useTableCellStyle} from '@common/ui/tables/style/use-table-cell-style';\n\ninterface TableCellProps {\n  rowIsHovered: boolean;\n  rowIndex: number;\n  index: number;\n  item: TableDataItem;\n  id?: string;\n}\nexport function TableCell({\n  rowIndex,\n  rowIsHovered,\n  index,\n  item,\n  id,\n}: TableCellProps) {\n  const {columns} = useContext(TableContext);\n  const column = columns[index];\n\n  const rowContext: RowContext = useMemo(() => {\n    return {\n      index: rowIndex,\n      isHovered: rowIsHovered,\n      isPlaceholder: item.isPlaceholder,\n    };\n  }, [rowIndex, rowIsHovered, item.isPlaceholder]);\n\n  const style = useTableCellStyle({\n    index: index,\n    isHeader: false,\n  });\n\n  return (\n    <div\n      tabIndex={-1}\n      role=\"gridcell\"\n      aria-colindex={index + 1}\n      id={id}\n      className={style}\n    >\n      <div className=\"overflow-x-hidden overflow-ellipsis min-w-0 w-full\">\n        {column.body(item, rowContext)}\n      </div>\n    </div>\n  );\n}\n","import React, {HTMLAttributes, useRef} from 'react';\nimport {createEventHandler} from '../../utils/dom/create-event-handler';\nimport {useGlobalListeners} from '@react-aria/utils';\n\ninterface PointerState {\n  lastPosition: {x: number; y: number};\n  id?: number;\n  started: boolean;\n  el?: HTMLElement;\n  originalTouchAction?: string;\n  originalUserSelect?: string;\n  longPressTimer?: any;\n  longPressTriggered?: boolean;\n}\n\ninterface UsePointerEventsReturn {\n  domProps: HTMLAttributes<HTMLElement>;\n}\n\nexport interface UsePointerEventsProps {\n  onMoveStart?: (e: PointerEvent, el: HTMLElement) => false | void;\n  onMove?: (e: PointerEvent, deltaX: number, deltaY: number) => void;\n  onMoveEnd?: (e: PointerEvent) => void;\n  onPointerDown?: (e: React.PointerEvent) => void | false;\n  onPointerUp?: (e: PointerEvent, el: HTMLElement) => void;\n  onPress?: (e: PointerEvent, el: HTMLElement) => void;\n  onLongPress?: (e: PointerEvent | React.PointerEvent, el: HTMLElement) => void;\n  preventDefault?: boolean;\n  stopPropagation?: boolean;\n  minimumMovement?: number;\n}\nexport function usePointerEvents({\n  onMoveStart,\n  onMove,\n  onMoveEnd,\n  minimumMovement = 0,\n  preventDefault,\n  stopPropagation = true,\n  onPress,\n  onLongPress,\n  ...props\n}: UsePointerEventsProps): UsePointerEventsReturn {\n  const stateRef = useRef<PointerState>({\n    lastPosition: {x: 0, y: 0},\n    started: false,\n    longPressTriggered: false,\n  });\n  const state = stateRef.current;\n\n  const {addGlobalListener, removeGlobalListener} = useGlobalListeners();\n\n  const start = (e: PointerEvent) => {\n    if (!state.el) return;\n    const result = onMoveStart?.(e, state.el);\n\n    // allow user to cancel interaction\n    if (result === false) return;\n\n    state.originalTouchAction = state.el.style.touchAction;\n    state.el.style.touchAction = 'none';\n    state.originalUserSelect = document.documentElement.style.userSelect;\n    document.documentElement.style.userSelect = 'none';\n    state.started = true;\n  };\n\n  const onPointerDown = (e: React.PointerEvent) => {\n    if (e.button === 0 && state.id == null) {\n      state.started = false;\n\n      const result = props.onPointerDown?.(e);\n      if (result === false) return;\n\n      if (stopPropagation) {\n        e.stopPropagation();\n      }\n      if (preventDefault) {\n        e.preventDefault();\n      }\n      state.id = e.pointerId;\n      state.el = e.currentTarget as HTMLElement;\n      state.lastPosition = {x: e.clientX, y: e.clientY};\n\n      // use global listeners, so we don't have to capture pointer,\n      // which would prevent click events on child nodes\n\n      if (onLongPress) {\n        state.longPressTimer = setTimeout(() => {\n          onLongPress(e, state.el!);\n          state.longPressTriggered = true;\n        }, 400);\n      }\n\n      if (onMoveStart || onMove) {\n        addGlobalListener(window, 'pointermove', onPointerMove, false);\n      }\n      addGlobalListener(window, 'pointerup', onPointerUp, false);\n      addGlobalListener(window, 'pointercancel', onPointerUp, false);\n    }\n  };\n\n  const onPointerMove = (e: PointerEvent) => {\n    if (e.pointerId === state.id) {\n      const deltaX = e.clientX - state.lastPosition.x;\n      const deltaY = e.clientY - state.lastPosition.y;\n\n      if (\n        (Math.abs(deltaX) >= minimumMovement ||\n          Math.abs(deltaY) >= minimumMovement) &&\n        !state.started\n      ) {\n        start(e);\n      }\n\n      if (state.started) {\n        onMove?.(e, deltaX, deltaY);\n        state.lastPosition = {x: e.clientX, y: e.clientY};\n      }\n    }\n  };\n\n  const onPointerUp = (e: PointerEvent) => {\n    if (e.pointerId === state.id) {\n      // cancel long press timer, if exists\n      if (state.longPressTimer) {\n        clearTimeout(state.longPressTimer);\n      }\n\n      const longPressTriggered = state.longPressTriggered;\n      state.longPressTriggered = false;\n\n      // only call onMoveEnd if we actually started moving\n      if (state.started) {\n        onMoveEnd?.(e);\n      }\n\n      if (state.el) {\n        // handle press only if event was not cancelled (via touch scroll on mobile for example)\n        if (e.type !== 'pointercancel') {\n          props.onPointerUp?.(e, state.el);\n\n          // only call onPress if pointer did not leave onPointerDown element\n          if (e.target && state.el.contains(e.target as HTMLElement)) {\n            // trigger either onPress or onLongPress\n            if (longPressTriggered) {\n              onLongPress?.(e, state.el);\n            } else {\n              onPress?.(e, state.el);\n            }\n          }\n        }\n\n        document.documentElement.style.userSelect =\n          state.originalUserSelect || '';\n        state.el.style.touchAction = state.originalTouchAction || '';\n      }\n      state.id = undefined;\n      state.started = false;\n      removeGlobalListener(window, 'pointermove', onPointerMove, false);\n      removeGlobalListener(window, 'pointerup', onPointerUp, false);\n      removeGlobalListener(window, 'pointercancel', onPointerUp, false);\n    }\n  };\n\n  return {\n    domProps: {\n      onPointerDown: createEventHandler(onPointerDown),\n    },\n  };\n}\n","import {isCtrlKeyPressed} from './is-ctrl-key-pressed';\n\ninterface Event {\n  altKey: boolean;\n  ctrlKey: boolean;\n  metaKey: boolean;\n  shiftKey: boolean;\n}\n\nexport function isCtrlOrShiftPressed(e: Event) {\n  return e.shiftKey || isCtrlKeyPressed(e);\n}\n","import clsx from 'clsx';\nimport {useContext} from 'react';\nimport {TableContext} from '@common/ui/tables/table-context';\nimport {useIsDarkMode} from '@common/ui/themes/use-is-dark-mode';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\n\ninterface Props {\n  index: number;\n  isSelected: boolean;\n  isHeader?: boolean;\n}\nexport function useTableRowStyle({index, isSelected, isHeader}: Props) {\n  const isDarkMode = useIsDarkMode();\n  const isMobile = useIsMobileMediaQuery();\n  const {hideBorder, enableSelection, collapseOnMobile, onAction} =\n    useContext(TableContext);\n  const isFirst = index === 0;\n  return clsx(\n    'flex gap-x-16 break-inside-avoid outline-none border border-transparent',\n    onAction && 'cursor-pointer',\n    isMobile && collapseOnMobile && hideBorder\n      ? 'mb-8 pl-8 pr-0 rounded'\n      : 'px-16',\n    !hideBorder && 'border-b-divider',\n    !hideBorder && isFirst && 'border-t-divider',\n    isSelected &&\n      !isDarkMode &&\n      'bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus',\n    isSelected &&\n      isDarkMode &&\n      'bg-selected hover:bg-focus focus-visible:bg-focus',\n    !isSelected &&\n      !isHeader &&\n      (enableSelection || onAction) &&\n      'focus-visible:bg-focus hover:bg-hover'\n  );\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  JSXElementConstructor,\n  KeyboardEventHandler,\n  MouseEventHandler,\n  useContext,\n  useRef,\n  useState,\n} from 'react';\nimport {TableContext} from './table-context';\nimport {TableCell} from './table-cell';\nimport {TableDataItem} from './types/table-data-item';\nimport {createEventHandler} from '../../utils/dom/create-event-handler';\nimport {usePointerEvents} from '../interactions/use-pointer-events';\nimport {isCtrlOrShiftPressed} from '../../utils/keybinds/is-ctrl-or-shift-pressed';\nimport {useTableRowStyle} from '@common/ui/tables/style/use-table-row-style';\nimport clsx from 'clsx';\n\nconst interactableElements = ['button', 'a', 'input', 'select', 'textarea'];\n\nexport interface RowElementProps<T = TableDataItem>\n  extends ComponentPropsWithoutRef<'tr'> {\n  item: T & {isPlaceholder?: boolean};\n}\n\ninterface TableRowProps {\n  item: TableDataItem;\n  index: number;\n  renderAs?: JSXElementConstructor<RowElementProps>;\n  className?: string;\n  style?: React.CSSProperties;\n}\nexport function TableRow({\n  item,\n  index,\n  renderAs,\n  className,\n  style,\n}: TableRowProps) {\n  const {\n    selectedRows,\n    columns,\n    toggleRow,\n    selectRow,\n    onAction,\n    selectRowOnContextMenu,\n    enableSelection,\n    selectionStyle,\n    hideHeaderRow,\n  } = useContext(TableContext);\n\n  const isTouchDevice = useRef(false);\n  const isSelected = selectedRows.includes(item.id);\n  const [isHovered, setIsHovered] = useState(false);\n\n  const clickedOnInteractable = (e: React.MouseEvent | PointerEvent) => {\n    return (e.target as HTMLElement).closest(interactableElements.join(','));\n  };\n\n  const doubleClickHandler: MouseEventHandler<HTMLDivElement> = e => {\n    if (\n      selectionStyle === 'highlight' &&\n      onAction &&\n      !isTouchDevice.current &&\n      !clickedOnInteractable(e)\n    ) {\n      e.preventDefault();\n      e.stopPropagation();\n      onAction(item, index);\n    }\n  };\n\n  const anyRowsSelected = !!selectedRows.length;\n\n  const handleRowTap = (e: PointerEvent) => {\n    if (clickedOnInteractable(e)) return;\n    if (selectionStyle === 'checkbox') {\n      if (enableSelection && (anyRowsSelected || !onAction)) {\n        toggleRow(item);\n      } else if (onAction) {\n        onAction(item, index);\n      }\n    } else if (selectionStyle === 'highlight') {\n      if (isTouchDevice.current) {\n        if (enableSelection && anyRowsSelected) {\n          toggleRow(item);\n        } else {\n          onAction?.(item, index);\n        }\n      } else if (enableSelection) {\n        selectRow(item, isCtrlOrShiftPressed(e));\n      }\n    }\n  };\n\n  const {domProps} = usePointerEvents({\n    onPointerDown: e => {\n      isTouchDevice.current = e.pointerType === 'touch';\n    },\n    onPress: handleRowTap,\n    onLongPress: enableSelection\n      ? () => {\n          if (isTouchDevice.current) {\n            toggleRow(item);\n          }\n        }\n      : undefined,\n  });\n\n  const keyboardHandler: KeyboardEventHandler = e => {\n    if (enableSelection && e.key === ' ') {\n      e.preventDefault();\n      e.stopPropagation();\n      if (selectionStyle === 'checkbox') {\n        toggleRow(item);\n      } else {\n        selectRow(item);\n      }\n    } else if (e.key === 'Enter' && !selectedRows.length && onAction) {\n      e.preventDefault();\n      e.stopPropagation();\n      onAction(item, index);\n    }\n  };\n\n  const contextMenuHandler: MouseEventHandler = e => {\n    if (selectRowOnContextMenu && enableSelection) {\n      if (!selectedRows.includes(item.id)) {\n        selectRow(item);\n      }\n    }\n    // prevent context menu on mobile\n    if (isTouchDevice.current) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  const styleClassName = useTableRowStyle({index, isSelected});\n\n  const RowElement = renderAs || 'div';\n  return (\n    <RowElement\n      role=\"row\"\n      aria-rowindex={index + 1 + (hideHeaderRow ? 0 : 1)}\n      aria-selected={isSelected}\n      tabIndex={-1}\n      className={clsx(className, styleClassName)}\n      item={RowElement === 'div' ? (undefined as any) : item}\n      onDoubleClick={createEventHandler(doubleClickHandler)}\n      onKeyDown={createEventHandler(keyboardHandler)}\n      onContextMenu={createEventHandler(contextMenuHandler)}\n      onPointerEnter={createEventHandler(() => setIsHovered(true))}\n      onPointerLeave={createEventHandler(() => setIsHovered(false))}\n      style={style}\n      {...domProps}\n    >\n      {columns.map((column, cellIndex) => (\n        <TableCell\n          rowIndex={index}\n          rowIsHovered={isHovered}\n          index={cellIndex}\n          item={item}\n          key={`${item.id}-${column.key}`}\n        />\n      ))}\n    </RowElement>\n  );\n}\n","import {ColumnConfig} from '@common/datatable/column-config';\nimport {TableDataItem} from '@common/ui/tables/types/table-data-item';\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\nimport React, {useContext} from 'react';\nimport {Checkbox} from '@common/ui/forms/toggle/checkbox';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {TableContext} from '@common/ui/tables/table-context';\n\nexport const CheckboxColumnConfig: ColumnConfig<TableDataItem> = {\n  key: 'checkbox',\n  header: () => <SelectAllCheckbox />,\n  align: 'center',\n  width: 'w-24 flex-shrink-0',\n  body: (item, row) => {\n    if (row.isPlaceholder) {\n      return <Skeleton size=\"w-24 h-24\" variant=\"rect\" />;\n    }\n    return <SelectRowCheckbox item={item} />;\n  },\n};\n\ninterface SelectRowCheckboxProps {\n  item: TableDataItem;\n}\nfunction SelectRowCheckbox({item}: SelectRowCheckboxProps) {\n  const {selectedRows, toggleRow} = useContext(TableContext);\n  return (\n    <Checkbox\n      checked={selectedRows.includes(item.id)}\n      onChange={() => toggleRow(item)}\n    />\n  );\n}\n\nfunction SelectAllCheckbox() {\n  const {trans} = useTrans();\n\n  const {data, selectedRows, onSelectionChange} = useContext(TableContext);\n  const allRowsSelected = !!data.length && data.length === selectedRows.length;\n  const someRowsSelected = !allRowsSelected && !!selectedRows.length;\n\n  return (\n    <Checkbox\n      aria-label={trans({message: 'Select all'})}\n      isIndeterminate={someRowsSelected}\n      checked={allRowsSelected}\n      onChange={() => {\n        if (allRowsSelected) {\n          onSelectionChange([]);\n        } else {\n          onSelectionChange(data.map(d => d.id));\n        }\n      }}\n    />\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowDownwardIcon = createSvgIcon(\n  <path d=\"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z\" />\n, 'ArrowDownwardOutlined');\n","import {useContext, useState} from 'react';\nimport clsx from 'clsx';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {TableContext} from './table-context';\nimport {SortDescriptor} from './types/sort-descriptor';\nimport {ArrowDownwardIcon} from '../../icons/material/ArrowDownward';\nimport {useTableCellStyle} from '@common/ui/tables/style/use-table-cell-style';\n\ninterface HeaderCellProps {\n  index: number;\n}\nexport function HeaderCell({index}: HeaderCellProps) {\n  const {columns, sortDescriptor, onSortChange, enableSorting} =\n    useContext(TableContext);\n  const column = columns[index];\n\n  const style = useTableCellStyle({\n    index: index,\n    isHeader: true,\n  });\n\n  const [isHovered, setIsHovered] = useState(false);\n\n  const sortingKey = column.sortingKey || column.key;\n  const allowSorting = column.allowsSorting && enableSorting;\n  const {orderBy, orderDir} = sortDescriptor || {};\n\n  const sortActive = allowSorting && orderBy === sortingKey;\n\n  let ariaSort: 'ascending' | 'descending' | 'none' | undefined;\n  if (sortActive && orderDir === 'asc') {\n    ariaSort = 'ascending';\n  } else if (sortActive && orderDir === 'desc') {\n    ariaSort = 'descending';\n  } else if (allowSorting) {\n    ariaSort = 'none';\n  }\n\n  const toggleSorting = () => {\n    if (!allowSorting) return;\n\n    let newSort: SortDescriptor;\n\n    // if this col was sorted desc, go to asc\n    if (sortActive && orderDir === 'desc') {\n      newSort = {orderDir: 'asc', orderBy: sortingKey};\n\n      // if this col was sorted asc, clear sort\n    } else if (sortActive && orderDir === 'asc') {\n      newSort = {orderBy: undefined, orderDir: undefined};\n\n      // if sort was on another col, or no sort was applied yet, start from desc\n    } else {\n      newSort = {orderDir: 'desc', orderBy: sortingKey};\n    }\n\n    onSortChange?.(newSort);\n  };\n\n  const sortVisible = sortActive || isHovered;\n  const sortVariants = {\n    visible: {opacity: 1, y: 0},\n    hidden: {opacity: 0, y: '-25%'},\n  };\n\n  return (\n    <div\n      role=\"columnheader\"\n      tabIndex={-1}\n      aria-colindex={index + 1}\n      aria-sort={ariaSort}\n      className={clsx(\n        style,\n        'text-muted font-medium text-xs',\n        allowSorting && 'cursor-pointer'\n      )}\n      onMouseEnter={() => {\n        setIsHovered(true);\n      }}\n      onMouseLeave={() => {\n        setIsHovered(false);\n      }}\n      onKeyDown={e => {\n        if (e.key === ' ' || e.key === 'Enter') {\n          e.preventDefault();\n          toggleSorting();\n        }\n      }}\n      onClick={toggleSorting}\n    >\n      {column.hideHeader ? (\n        <div className=\"sr-only\">{column.header()}</div>\n      ) : (\n        column.header()\n      )}\n      <AnimatePresence>\n        {allowSorting && (\n          <m.span\n            variants={sortVariants}\n            animate={sortVisible ? 'visible' : 'hidden'}\n            initial={false}\n            transition={{type: 'tween'}}\n            key=\"sort-icon\"\n            className=\"inline-block ml-6 -mt-2\"\n            data-testid=\"table-sort-button\"\n            aria-hidden={!sortVisible}\n          >\n            <ArrowDownwardIcon\n              size=\"xs\"\n              className={clsx(\n                'text-muted',\n                orderDir === 'asc' &&\n                  orderBy === sortingKey &&\n                  'rotate-180 transition-transform'\n              )}\n            />\n          </m.span>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n","import {HeaderCell} from '@common/ui/tables/header-cell';\nimport React, {useContext} from 'react';\nimport {TableContext} from '@common/ui/tables/table-context';\n\nexport function TableHeaderRow() {\n  const {columns} = useContext(TableContext);\n  return (\n    <div\n      role=\"row\"\n      aria-rowindex={1}\n      tabIndex={-1}\n      className=\"flex gap-x-16 px-16\"\n    >\n      {columns.map((column, columnIndex) => (\n        <HeaderCell index={columnIndex} key={column.key} />\n      ))}\n    </div>\n  );\n}\n","import React, {\n  cloneElement,\n  ComponentPropsWithoutRef,\n  Fragment,\n  JSXElementConstructor,\n  MutableRefObject,\n  ReactElement,\n  useCallback,\n  useContext,\n  useMemo,\n} from 'react';\nimport {useControlledState} from '@react-stately/utils';\nimport {SortDescriptor} from './types/sort-descriptor';\nimport {useGridNavigation} from './navigate-grid';\nimport {RowElementProps, TableRow} from './table-row';\nimport {\n  TableContext,\n  TableContextValue,\n  TableSelectionStyle,\n} from './table-context';\nimport {ColumnConfig} from '../../datatable/column-config';\nimport {TableDataItem} from './types/table-data-item';\nimport clsx from 'clsx';\nimport {useInteractOutside} from '@react-aria/interactions';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {isCtrlKeyPressed} from '@common/utils/keybinds/is-ctrl-key-pressed';\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\nimport {CheckboxColumnConfig} from '@common/ui/tables/checkbox-column-config';\nimport {TableHeaderRow} from '@common/ui/tables/table-header-row';\n\nexport interface TableProps<T extends TableDataItem>\n  extends ComponentPropsWithoutRef<'table'> {\n  className?: string;\n  columns: ColumnConfig<T>[];\n  hideHeaderRow?: boolean;\n  data: T[];\n  meta?: any;\n  tableRef?: MutableRefObject<HTMLTableElement>;\n  selectedRows?: (number | string)[];\n  defaultSelectedRows?: (number | string)[];\n  onSelectionChange?: (keys: (number | string)[]) => void;\n  sortDescriptor?: SortDescriptor;\n  onSortChange?: (descriptor: SortDescriptor) => any;\n  enableSorting?: boolean;\n  onDelete?: (items: T[]) => void;\n  enableSelection?: boolean;\n  selectionStyle?: TableSelectionStyle;\n  ariaLabelledBy?: string;\n  onAction?: (item: T, index: number) => void;\n  selectRowOnContextMenu?: boolean;\n  renderRowAs?: JSXElementConstructor<RowElementProps<T>>;\n  tableBody?: ReactElement<TableBodyProps>;\n  hideBorder?: boolean;\n  closeOnInteractOutside?: boolean;\n  collapseOnMobile?: boolean;\n  cellHeight?: string;\n  headerCellHeight?: string;\n}\nexport function Table<T extends TableDataItem>({\n  className,\n  columns: userColumns,\n  collapseOnMobile = true,\n  hideHeaderRow = false,\n  hideBorder = false,\n  data,\n  selectedRows: propsSelectedRows,\n  defaultSelectedRows: propsDefaultSelectedRows,\n  onSelectionChange: propsOnSelectionChange,\n  sortDescriptor: propsSortDescriptor,\n  onSortChange: propsOnSortChange,\n  enableSorting = true,\n  onDelete,\n  enableSelection = true,\n  selectionStyle = 'checkbox',\n  ariaLabelledBy,\n  selectRowOnContextMenu,\n  onAction,\n  renderRowAs,\n  tableBody,\n  meta,\n  tableRef: propsTableRef,\n  closeOnInteractOutside = false,\n  cellHeight,\n  headerCellHeight,\n  ...domProps\n}: TableProps<T>) {\n  const isMobile = useIsMobileMediaQuery();\n  const isCollapsedMode = !!isMobile && collapseOnMobile;\n  if (isCollapsedMode) {\n    hideHeaderRow = true;\n    hideBorder = true;\n  }\n\n  const [selectedRows, onSelectionChange] = useControlledState(\n    propsSelectedRows,\n    propsDefaultSelectedRows || [],\n    propsOnSelectionChange,\n  );\n\n  const [sortDescriptor, onSortChange] = useControlledState(\n    propsSortDescriptor,\n    undefined,\n    propsOnSortChange,\n  );\n\n  const toggleRow = useCallback(\n    (item: TableDataItem) => {\n      const newValues = [...selectedRows];\n      if (!newValues.includes(item.id)) {\n        newValues.push(item.id);\n      } else {\n        const index = newValues.indexOf(item.id);\n        newValues.splice(index, 1);\n      }\n      onSelectionChange(newValues);\n    },\n    [selectedRows, onSelectionChange],\n  );\n\n  const selectRow = useCallback(\n    // allow deselecting all rows by passing in null\n    (item: TableDataItem | null, merge?: boolean) => {\n      let newValues: (string | number)[] = [];\n      if (item) {\n        newValues = merge\n          ? [...selectedRows?.filter(id => id !== item.id), item.id]\n          : [item.id];\n      }\n      onSelectionChange(newValues);\n    },\n    [selectedRows, onSelectionChange],\n  );\n\n  // add checkbox columns to config, if selection is enabled\n  const columns = useMemo(() => {\n    const filteredColumns = userColumns.filter(c => {\n      const visibleInMode = c.visibleInMode || 'regular';\n      if (visibleInMode === 'all') {\n        return true;\n      }\n      if (visibleInMode === 'compact' && isCollapsedMode) {\n        return true;\n      }\n      if (visibleInMode === 'regular' && !isCollapsedMode) {\n        return true;\n      }\n    });\n    const showCheckboxCell =\n      enableSelection && selectionStyle !== 'highlight' && !isMobile;\n    if (showCheckboxCell) {\n      filteredColumns.unshift(CheckboxColumnConfig);\n    }\n    return filteredColumns;\n  }, [isMobile, userColumns, enableSelection, selectionStyle, isCollapsedMode]);\n\n  const contextValue: TableContextValue<T> = {\n    isCollapsedMode,\n    cellHeight,\n    headerCellHeight,\n    hideBorder,\n    hideHeaderRow,\n    selectedRows,\n    onSelectionChange,\n    enableSorting,\n    enableSelection,\n    selectionStyle,\n    data,\n    columns,\n    sortDescriptor,\n    onSortChange,\n    toggleRow,\n    selectRow,\n    onAction,\n    selectRowOnContextMenu,\n    meta,\n    collapseOnMobile,\n  };\n\n  const navProps = useGridNavigation({\n    cellCount: enableSelection ? columns.length + 1 : columns.length,\n    rowCount: data.length + 1,\n  });\n\n  const tableBodyProps: TableBodyProps = {\n    renderRowAs: renderRowAs as any,\n  };\n\n  if (!tableBody) {\n    tableBody = <BasicTableBody {...tableBodyProps} />;\n  } else {\n    tableBody = cloneElement(tableBody, tableBodyProps);\n  }\n\n  // deselect rows when clicking outside the table\n  const tableRef = useObjectRef(propsTableRef);\n  useInteractOutside({\n    ref: tableRef,\n    onInteractOutside: e => {\n      if (\n        closeOnInteractOutside &&\n        enableSelection &&\n        selectedRows?.length &&\n        // don't deselect if clicking on a dialog (for example is table row has a context menu)\n        !(e.target as HTMLElement).closest('[role=\"dialog\"]')\n      ) {\n        onSelectionChange([]);\n      }\n    },\n  });\n\n  return (\n    <TableContext.Provider value={contextValue as any}>\n      <div\n        {...mergeProps(domProps, navProps, {\n          onKeyDown: (e: KeyboardEvent) => {\n            if (e.key === 'Escape') {\n              e.preventDefault();\n              e.stopPropagation();\n              if (selectedRows?.length) {\n                onSelectionChange([]);\n              }\n            } else if (e.key === 'Delete') {\n              e.preventDefault();\n              e.stopPropagation();\n              if (selectedRows?.length) {\n                onDelete?.(\n                  data.filter(item => selectedRows?.includes(item.id)),\n                );\n              }\n            } else if (isCtrlKeyPressed(e) && e.key === 'a') {\n              e.preventDefault();\n              e.stopPropagation();\n              if (enableSelection) {\n                onSelectionChange(data.map(item => item.id));\n              }\n            }\n          },\n        })}\n        role=\"grid\"\n        tabIndex={0}\n        aria-rowcount={data.length + 1}\n        aria-colcount={columns.length + 1}\n        ref={tableRef}\n        aria-multiselectable={enableSelection ? true : undefined}\n        aria-labelledby={ariaLabelledBy}\n        className={clsx(\n          className,\n          'isolate select-none text-sm outline-none focus-visible:ring-2',\n        )}\n      >\n        {!hideHeaderRow && <TableHeaderRow />}\n        {tableBody}\n      </div>\n    </TableContext.Provider>\n  );\n}\n\nexport interface TableBodyProps {\n  renderRowAs?: TableProps<TableDataItem>['renderRowAs'];\n}\nfunction BasicTableBody({renderRowAs}: TableBodyProps) {\n  const {data} = useContext(TableContext);\n  return (\n    <Fragment>\n      {data.map((item, rowIndex) => (\n        <TableRow\n          item={item}\n          index={rowIndex}\n          key={item.id}\n          renderAs={renderRowAs}\n        />\n      ))}\n    </Fragment>\n  );\n}\n","import clsx from 'clsx';\nimport React, {\n  ComponentProps,\n  ComponentPropsWithoutRef,\n  forwardRef,\n} from 'react';\nimport {Link} from 'react-router-dom';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {AvatarPlaceholderIcon} from '@common/auth/ui/account-settings/avatar/avatar-placeholder-icon';\n\ntype Size = 'xs' | 'sm' | 'md' | 'lg' | 'xl' | string;\n\nexport interface AvatarProps extends ComponentPropsWithoutRef<any> {\n  className?: string;\n  src?: string;\n  label?: string;\n  circle?: boolean;\n  size?: Size;\n  link?: string;\n  fallback?: 'initials' | 'generic';\n  lazy?: boolean;\n}\nexport const Avatar = forwardRef<HTMLImageElement, AvatarProps>(\n  (\n    {\n      className,\n      circle,\n      size = 'md',\n      src,\n      link,\n      label,\n      fallback = 'generic',\n      lazy = true,\n      ...domProps\n    },\n    ref,\n  ) => {\n    let renderedAvatar = src ? (\n      <img\n        ref={ref}\n        src={src}\n        alt={label}\n        loading={lazy ? 'lazy' : undefined}\n        className=\"block h-full w-full object-cover\"\n      />\n    ) : (\n      <div className=\"h-full w-full bg-alt dark:bg-chip\">\n        <AvatarPlaceholderIcon\n          viewBox=\"0 0 48 48\"\n          className=\"h-full w-full text-muted\"\n        />\n      </div>\n    );\n\n    if (label) {\n      renderedAvatar = <Tooltip label={label}>{renderedAvatar}</Tooltip>;\n    }\n\n    const wrapperProps: ComponentProps<any> = {\n      ...domProps,\n      className: clsx(\n        className,\n        'relative block overflow-hidden select-none flex-shrink-0',\n        getSizeClassName(size),\n        circle ? 'rounded-full' : 'rounded',\n      ),\n    };\n\n    return link ? (\n      <Link {...wrapperProps} to={link}>\n        {renderedAvatar}\n      </Link>\n    ) : (\n      <div {...wrapperProps}>{renderedAvatar}</div>\n    );\n  },\n);\n\nfunction getSizeClassName(size: Size) {\n  switch (size) {\n    case 'xs':\n      return 'w-18 h-18';\n    case 'sm':\n      return 'w-24 h-24';\n    case 'md':\n      return 'w-32 h-32';\n    case 'lg':\n      return 'w-40 h-40';\n    case 'xl':\n      return 'w-60 h-60';\n    // allow overriding with custom classNames\n    default:\n      return size;\n  }\n}\n","import React, {\n  Children,\n  cloneElement,\n  isValidElement,\n  ReactElement,\n} from 'react';\nimport clsx from 'clsx';\nimport type {ChipProps} from './chip';\n\nexport interface ChipListProps {\n  className?: string;\n  children?: ReactElement | ReactElement[];\n  size?: ChipProps['size'];\n  radius?: ChipProps['radius'];\n  color?: ChipProps['color'];\n  selectable?: ChipProps['selectable'];\n  wrap?: boolean;\n}\nexport function ChipList({\n  className,\n  children,\n  size,\n  color,\n  radius,\n  selectable,\n  wrap = true,\n}: ChipListProps) {\n  return (\n    <div\n      className={clsx(\n        'flex items-center gap-8',\n        wrap && 'flex-wrap',\n        className,\n      )}\n    >\n      {Children.map(children, chip => {\n        if (isValidElement<ChipProps>(chip)) {\n          return cloneElement<ChipProps>(chip, {\n            size,\n            color,\n            selectable,\n            radius,\n          });\n        }\n      })}\n    </div>\n  );\n}\n","import {Fragment, memo} from 'react';\nimport {useNumberFormatter} from './use-number-formatter';\nimport {NumberFormatOptions} from '@internationalized/number';\nimport {shallowEqual} from '../utils/shallow-equal';\n\ninterface FormattedNumberProps extends NumberFormatOptions {\n  value: number;\n}\nexport const FormattedNumber = memo(\n  ({value, ...options}: FormattedNumberProps) => {\n    const formatter = useNumberFormatter(options);\n\n    if (isNaN(value)) {\n      value = 0;\n    }\n\n    return <Fragment>{formatter.format(value)}</Fragment>;\n  },\n  shallowEqual\n);\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const AddIcon = createSvgIcon(\n  <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" />\n, 'AddOutlined');\n","import {DragMonitor} from './use-drag-monitor';\nimport {ConnectedDraggable, DraggableId} from './use-draggable';\nimport {ConnectedDroppable} from './use-droppable';\n\nexport type DragSessionStatus =\n  | 'dropSuccess'\n  | 'dropFail'\n  | 'dragging'\n  | 'inactive';\n\nexport interface DragSession {\n  dragTargetId?: DraggableId;\n  status: DragSessionStatus;\n}\n\nexport const draggables = new Map<DraggableId, ConnectedDraggable>();\nexport const droppables = new Map<DraggableId, ConnectedDroppable>();\nexport const dragMonitors = new Map<DraggableId, DragMonitor>();\nexport const dragSession: DragSession = {\n  status: 'inactive',\n};\n","import React from 'react';\n\ntype NativeEvent =\n  | React.PointerEvent\n  | PointerEvent\n  | React.DragEvent<HTMLElement>\n  | DragEvent;\n\nexport interface InteractableEvent {\n  x: number;\n  y: number;\n  deltaX: number;\n  deltaY: number;\n  rect: InteractableRect;\n  nativeEvent: NativeEvent;\n}\n\nexport interface InteractableRect {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n  angle?: number;\n}\n\nexport function interactableEvent({\n  e,\n  rect,\n  deltaX,\n  deltaY,\n}: {\n  e: NativeEvent;\n  rect: InteractableRect;\n  deltaX?: number;\n  deltaY?: number;\n}): InteractableEvent {\n  return {\n    rect,\n    x: e.clientX,\n    y: e.clientY,\n    deltaX: deltaX ?? 0,\n    deltaY: deltaY ?? 0,\n    nativeEvent: e,\n  };\n}\n","type InteractionName = null | 'resize' | 'rotate' | 'drag' | 'move';\n\nexport let activeInteraction: InteractionName = null;\n\nexport function setActiveInteraction(name: InteractionName) {\n  activeInteraction = name;\n}\n","import {InteractableRect} from '../interactable-event';\n\nexport function domRectToObj(rect: DOMRect): InteractableRect {\n  return {\n    left: rect.left,\n    top: rect.top,\n    width: rect.width,\n    height: rect.height,\n  };\n}\n","// use intersection observer instead of getBoundingClientRect for better performance as this will be called in onPointerMove event\nimport {InteractableRect} from '../interactable-event';\nimport {ConnectedMouseSelectable} from './mouse-selection/use-mouse-selectable';\nimport {DraggableId} from './use-draggable';\nimport {ConnectedDroppable} from './use-droppable';\n\nexport function updateRects(\n  targets: Map<DraggableId, ConnectedDroppable | ConnectedMouseSelectable>\n) {\n  const observer = new IntersectionObserver(entries => {\n    entries.forEach(entry => {\n      const {width, height, left, top} = entry.boundingClientRect;\n      const [id, target] =\n        [...targets].find(\n          ([, target]) => target.ref.current === entry.target\n        ) || [];\n      if (id == null || target == null) return;\n\n      const rect: InteractableRect = {\n        width,\n        height,\n        left,\n        top,\n      };\n      targets.set(id, {...target, rect});\n    });\n    observer.disconnect();\n  });\n\n  [...targets.values()].forEach(target => {\n    if (target.ref.current) {\n      observer.observe(target.ref.current);\n    }\n  });\n}\n","import React, {RefObject, useLayoutEffect, useRef} from 'react';\nimport {draggables, dragMonitors, dragSession, droppables} from './drag-state';\nimport {\n  InteractableEvent,\n  interactableEvent,\n  InteractableRect,\n} from '../interactable-event';\nimport {activeInteraction, setActiveInteraction} from '../active-interaction';\nimport {domRectToObj} from '../utils/dom-rect-to-obj';\nimport {updateRects} from './update-rects';\nimport {useGlobalListeners} from '@react-aria/utils';\nimport {DragMonitor} from './use-drag-monitor';\nimport {NativeFileDraggable} from './use-droppable';\n\ninterface DragState {\n  currentRect?: InteractableRect;\n  lastPosition: {x: number; y: number};\n  clickedEl?: HTMLElement;\n}\n\nexport type DragPreviewRenderer = (\n  draggable: ConnectedDraggable,\n  callback: (node: HTMLElement) => void\n) => void;\n\nexport type DraggableId = string | number | object;\n\nexport interface ConnectedDraggable<T = any> {\n  type: string;\n  id: DraggableId;\n  getData: () => T;\n  ref: RefObject<HTMLElement>;\n}\n\n// Either draggable from within the app, or file dragged in from the desktop\nexport type MixedDraggable = ConnectedDraggable | NativeFileDraggable;\n\ninterface UseDragProps extends ConnectedDraggable {\n  disabled?: boolean;\n  onDragStart?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  onDragMove?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  onDragEnd?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  preview?: RefObject<DragPreviewRenderer>;\n  hidePreview?: boolean;\n}\nexport function useDraggable({\n  id,\n  disabled,\n  ref,\n  preview,\n  hidePreview,\n  ...options\n}: UseDragProps) {\n  const dragHandleRef = useRef<HTMLButtonElement>(null);\n  const {addGlobalListener, removeAllGlobalListeners} = useGlobalListeners();\n\n  const state = useRef<DragState>({\n    lastPosition: {x: 0, y: 0},\n  }).current;\n\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n\n  useLayoutEffect(() => {\n    if (!disabled) {\n      draggables.set(id, {\n        ...draggables.get(id),\n        id,\n        ref,\n        type: optionsRef.current.type,\n        getData: optionsRef.current.getData,\n      });\n    } else {\n      draggables.delete(id);\n    }\n    return () => {\n      draggables.delete(id);\n    };\n  }, [id, disabled, optionsRef, ref]);\n\n  // notify monitors connected to the same drag type as this draggable\n  const notifyMonitors = (callback: (m: DragMonitor) => void) => {\n    dragMonitors.forEach(monitor => {\n      if (monitor.type === draggables.get(id)?.type) {\n        callback(monitor);\n      }\n    });\n  };\n\n  const onDragStart = (e: React.DragEvent<HTMLElement>) => {\n    const draggable = draggables.get(id);\n    const el = ref.current;\n    const clickedOnHandle =\n      !dragHandleRef.current ||\n      !state.clickedEl ||\n      dragHandleRef.current.contains(state.clickedEl);\n\n    // if another interaction is in progress (rotate, resize, drag etc.), bail\n    if (activeInteraction || !el || !draggable || !clickedOnHandle) {\n      e.preventDefault();\n      e.stopPropagation();\n      return;\n    }\n\n    updateRects(droppables);\n    setActiveInteraction('drag');\n\n    // hide default browser ghost image\n    if (hidePreview) {\n      hideNativeGhostImage(e);\n    }\n    // this will hide default browser cursor icon, if \"dropEffect\" is not set in dragOver/dragEnter\n    e.dataTransfer.effectAllowed = 'move';\n\n    state.lastPosition = {x: e.clientX, y: e.clientY};\n    state.currentRect = domRectToObj(el.getBoundingClientRect());\n    const ie = interactableEvent({rect: state.currentRect!, e});\n\n    // If there is a preview option, use it to render a custom preview image that will\n    // appear under the pointer while dragging. If not, the element itself is dragged by the browser.\n    if (preview?.current) {\n      preview.current(draggable, node => {\n        e.dataTransfer.setDragImage(node, 0, 0);\n      });\n    }\n\n    dragSession.status = 'dragging';\n    dragSession.dragTargetId = id;\n    if (ref.current) {\n      ref.current.dataset.dragging = 'true';\n    }\n\n    optionsRef.current.onDragStart?.(ie, draggable);\n\n    // wait until next frame so changes made in \"onDragStart\" are reflected in drag monitors\n    requestAnimationFrame(() => {\n      notifyMonitors(m => m.onDragStart?.(ie, draggable));\n    });\n\n    // firefox does not provide clientX/clientY in \"onDrag\", need to listen for dragOver on window instead\n    addGlobalListener(window, 'dragover', onDragOver, true);\n  };\n\n  const onDragOver = (e: React.DragEvent<HTMLElement> | DragEvent) => {\n    e.preventDefault();\n\n    if (!state.currentRect) return;\n\n    const deltaX = e.clientX - state.lastPosition.x;\n    const deltaY = e.clientY - state.lastPosition.y;\n\n    const newRect = {\n      ...state.currentRect,\n      left: state.currentRect.left + deltaX,\n      top: state.currentRect.top + deltaY,\n    };\n\n    const ie = interactableEvent({rect: newRect, e, deltaX, deltaY});\n\n    const target = draggables.get(id);\n    if (target) {\n      optionsRef.current.onDragMove?.(ie, target);\n      notifyMonitors(m => m.onDragMove?.(ie, target));\n    }\n\n    state.lastPosition = {x: e.clientX, y: e.clientY};\n    state.currentRect = newRect;\n  };\n\n  const onDragEnd = (e: React.DragEvent<HTMLElement>) => {\n    removeAllGlobalListeners();\n    if (!state.currentRect) return;\n\n    setActiveInteraction(null);\n    if (emptyImage) {\n      emptyImage.remove();\n    }\n\n    const ie = interactableEvent({rect: state.currentRect, e});\n\n    const draggable = draggables.get(id);\n    if (draggable) {\n      optionsRef.current.onDragEnd?.(ie, draggable);\n      notifyMonitors(m => m.onDragEnd?.(ie, draggable, dragSession!.status));\n    }\n\n    // wait a frame before clearing so monitors have a chance to use drag session status\n    requestAnimationFrame(() => {\n      dragSession.dragTargetId = undefined;\n      dragSession.status = 'inactive';\n      if (ref.current) {\n        delete ref.current.dataset.dragging;\n      }\n    });\n  };\n\n  const draggableProps = {\n    draggable: !disabled,\n    onDragStart,\n    onDragEnd,\n    onPointerDown: (e: React.PointerEvent) => {\n      state.clickedEl = e.target as HTMLElement;\n    },\n  };\n\n  return {draggableProps, dragHandleRef};\n}\n\nlet emptyImage: HTMLImageElement | undefined;\nfunction hideNativeGhostImage(e: React.DragEvent) {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    // image needs to be in the dom to prevent \"globe\" icon in chrome\n    document.body.append(emptyImage);\n    emptyImage.src =\n      'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n\n  e.dataTransfer.setDragImage(emptyImage, 0, 0);\n}\n","import {UploadedFile} from '@common/uploads/uploaded-file';\n\nexport async function* readFilesFromDataTransfer(dataTransfer: DataTransfer) {\n  const entries: FileSystemEntry[] = [];\n\n  // Pull out all entries before reading them, otherwise\n  // some entries will be lost due to recursion with promises\n  for (const item of dataTransfer.items) {\n    if (item.kind === 'file') {\n      const entry = item.webkitGetAsEntry();\n      if (entry) {\n        entries.push(entry);\n      }\n    }\n  }\n\n  for (const entry of entries) {\n    if (entry.isFile) {\n      if (entry.name === '.DS_Store') continue;\n      const file = await getEntryFile(entry as FileSystemFileEntry);\n      yield new UploadedFile(file, entry.fullPath);\n    } else if (entry.isDirectory) {\n      yield* getEntriesFromDirectory(entry as FileSystemDirectoryEntry);\n    }\n  }\n}\n\nasync function* getEntriesFromDirectory(\n  item: FileSystemDirectoryEntry\n): AsyncIterable<any> {\n  const reader = item.createReader();\n\n  // We must call readEntries repeatedly because there may be a limit to the\n  // number of entries that are returned at once.\n  let entries: FileSystemEntry[];\n  do {\n    entries = await new Promise((resolve, reject) => {\n      reader.readEntries(resolve, reject);\n    });\n\n    for (const entry of entries) {\n      if (entry.isFile) {\n        if (entry.name === '.DS_Store') continue;\n        const file = await getEntryFile(entry as FileSystemFileEntry);\n        yield new UploadedFile(file, entry.fullPath);\n      } else if (entry.isDirectory) {\n        yield* getEntriesFromDirectory(entry as FileSystemDirectoryEntry);\n      }\n    }\n  } while (entries.length > 0);\n}\n\nfunction getEntryFile(entry: FileSystemFileEntry): Promise<File> {\n  return new Promise((resolve, reject) => entry.file(resolve, reject));\n}\n","export async function asyncIterableToArray<T>(\n  iterator: AsyncIterable<T>\n): Promise<T[]> {\n  const items: T[] = [];\n  for await (const item of iterator) {\n    items.push(item);\n  }\n  return items;\n}\n","import React, {RefObject, useLayoutEffect, useRef} from 'react';\nimport {draggables, dragSession, droppables} from './drag-state';\nimport {readFilesFromDataTransfer} from './read-files-from-data-transfer';\nimport {asyncIterableToArray} from '@common/utils/array/async-iterable-to-array';\nimport {InteractableRect} from '../interactable-event';\nimport {DraggableId, MixedDraggable} from './use-draggable';\nimport {UploadedFile} from '@common/uploads/uploaded-file';\n\nexport interface ConnectedDroppable {\n  id: DraggableId;\n  rect?: InteractableRect;\n  disabled?: boolean;\n  ref: RefObject<HTMLElement>;\n}\n\n// File dragged in from desktop\nexport interface NativeFileDraggable {\n  type: 'nativeFile';\n  el: null;\n  ref: null;\n  getData: () => Promise<UploadedFile[]>;\n}\n\ninterface UseDroppableProps<T extends HTMLElement> {\n  id: DraggableId;\n  disabled?: boolean;\n  types: ('nativeFile' | string)[];\n  ref: RefObject<T>;\n  // this will fire dragEnter/dragLeave/dragOver events when same element is both draggable and drop target and dragging target over itself. Used for showing line previews before/after element during sort.\n  allowDragEventsFromItself?: boolean;\n  onDragEnter?: (target: MixedDraggable) => void;\n  onDragLeave?: (target: MixedDraggable) => void;\n  onDragOver?: (\n    target: MixedDraggable,\n    e: React.DragEvent<HTMLElement>\n  ) => void;\n  // Handler that is called after draggable is held over droppable for a period of time.\n  // This typically opens the item so that the user can drop within it.\n  onDropActivate?: (e: MixedDraggable) => void;\n  onDrop?: (target: MixedDraggable) => void | Promise<void> | false;\n  acceptsDrop?: (target: MixedDraggable) => boolean;\n}\n\ninterface DroppableState {\n  dragOverElements: Set<Element>;\n  dropActivateTimer: ReturnType<typeof setTimeout> | undefined;\n}\n\nconst DROP_ACTIVATE_TIMEOUT = 400;\n\nexport function useDroppable<T extends HTMLElement>({\n  id,\n  disabled,\n  ref,\n  ...options\n}: UseDroppableProps<T>) {\n  const state = useRef<DroppableState>({\n    dragOverElements: new Set<Element>(),\n    dropActivateTimer: undefined,\n  }).current;\n\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n\n  useLayoutEffect(() => {\n    droppables.set(id, {\n      ...droppables.get(id),\n      disabled,\n      id,\n      ref,\n    });\n    return () => {\n      droppables.delete(id);\n    };\n  }, [id, optionsRef, disabled, ref]);\n\n  // check if drop target accepts drag target\n  const canDrop = (draggable: MixedDraggable): boolean => {\n    const options = optionsRef.current;\n\n    const allowEventsOnSelf =\n      options.allowDragEventsFromItself ||\n      ref.current !== draggable.ref?.current;\n\n    return !!(\n      draggable?.type &&\n      allowEventsOnSelf &&\n      options.types.includes(draggable.type) &&\n      (!options.acceptsDrop || options.acceptsDrop(draggable))\n    );\n  };\n\n  const fireDragLeave = (e: React.DragEvent<HTMLElement>) => {\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n    }\n  };\n\n  const onDragEnter = (e: React.DragEvent<HTMLElement>) => {\n    e.stopPropagation();\n\n    state.dragOverElements.add(e.target as Element);\n    if (state.dragOverElements.size > 1) {\n      return;\n    }\n\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      optionsRef.current.onDragEnter?.(draggable);\n\n      clearTimeout(state.dropActivateTimer);\n      if (typeof optionsRef.current.onDropActivate === 'function') {\n        state.dropActivateTimer = setTimeout(() => {\n          if (draggable) {\n            optionsRef.current.onDropActivate?.(draggable);\n          }\n        }, DROP_ACTIVATE_TIMEOUT);\n      }\n    }\n  };\n\n  const onDragLeave = (e: React.DragEvent<HTMLElement>) => {\n    e.stopPropagation();\n\n    // Track all the targets of dragenter events in a set, and remove them\n    // in dragleave. When the set becomes empty, we've left the drop target completely.\n    // We must also remove any elements that are no longer in the DOM, because dragleave\n    // events will never be fired for these. This can happen, for example, with drop\n    // indicators between items, which disappear when the drop target changes.\n    state.dragOverElements.delete(e.target as Element);\n    for (const element of state.dragOverElements) {\n      if (!e.currentTarget.contains(element)) {\n        state.dragOverElements.delete(element);\n      }\n    }\n\n    if (state.dragOverElements.size > 0) {\n      return;\n    }\n\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      fireDragLeave(e);\n      clearTimeout(state.dropActivateTimer);\n    }\n  };\n\n  const onDrop = async (e: React.DragEvent<HTMLElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    state.dragOverElements.clear();\n\n    fireDragLeave(e);\n    clearTimeout(state.dropActivateTimer);\n\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n\n      // drop target does not accept this type of droppable\n      if (!canDrop(draggable)) {\n        if (dragSession.status !== 'inactive') {\n          dragSession.status = 'dropFail';\n        }\n        // drop target accepts this type, but it might still reject the drop in callback\n      } else {\n        // allow callback to mark drop as failed\n        const dropResult = optionsRef.current.onDrop?.(draggable);\n\n        // drag session will only be active for draggables within the app, never for files dragged in from desktop\n        if (dragSession.status !== 'inactive') {\n          dragSession.status =\n            dropResult === false ? 'dropFail' : 'dropSuccess';\n        }\n      }\n    }\n  };\n\n  const droppableProps = {\n    onDragOver: (e: React.DragEvent<HTMLElement>) => {\n      e.preventDefault();\n      e.stopPropagation();\n      const draggable = getDraggable(e);\n      if (draggable && canDrop(draggable)) {\n        optionsRef.current.onDragOver?.(draggable, e);\n      }\n    },\n    onDragEnter,\n    onDragLeave,\n    onDrop,\n  };\n\n  return {\n    droppableProps: disabled ? {} : droppableProps,\n  };\n}\n\nfunction getDraggable(\n  e: React.DragEvent<HTMLElement>\n): MixedDraggable | undefined {\n  if (dragSession.dragTargetId != null) {\n    return draggables.get(dragSession.dragTargetId);\n  } else if (e.dataTransfer.types.includes('Files')) {\n    return {\n      type: 'nativeFile',\n      el: null,\n      ref: null,\n      getData: () => {\n        return asyncIterableToArray(readFilesFromDataTransfer(e.dataTransfer));\n      },\n    };\n  }\n}\n","import {\n  DropPosition,\n  SortSession,\n} from '@common/ui/interactions/dnd/sortable/use-sortable';\nimport {SortableStrategy} from '@common/ui/interactions/dnd/sortable/sortable-strategy';\nimport {droppables} from '@common/ui/interactions/dnd/drag-state';\n\nexport const sortableLineStrategy: SortableStrategy = {\n  onDragStart: () => {},\n  onDragEnter: () => {},\n  onDragOver: ({e, ref, item, sortSession, onDropPositionChange}) => {\n    const previousPosition = sortSession.dropPosition;\n    let newPosition: DropPosition = null;\n\n    const rect = droppables.get(item)?.rect;\n    if (rect) {\n      const midY = rect.top + rect.height / 2;\n      if (e.clientY <= midY) {\n        newPosition = 'before';\n      } else if (e.clientY >= midY) {\n        newPosition = 'after';\n      }\n    }\n\n    if (newPosition !== previousPosition) {\n      const overIndex = sortSession.sortables.indexOf(item);\n      sortSession.dropPosition = newPosition;\n      onDropPositionChange?.(sortSession.dropPosition);\n\n      clearLinePreview(sortSession);\n      if (ref.current) {\n        if (sortSession.dropPosition === 'after') {\n          addLinePreview(ref.current, 'bottom', sortSession);\n        } else {\n          // if it's the first row, add preview to the top border, as there's no previous element\n          if (overIndex === 0) {\n            addLinePreview(ref.current, 'top', sortSession);\n            // otherwise add preview to the bottom border of the previous row\n          } else {\n            const droppableId = sortSession.sortables[overIndex - 1];\n            const droppable = droppables.get(droppableId);\n            if (droppable?.ref.current) {\n              addLinePreview(droppable.ref.current, 'bottom', sortSession);\n            }\n          }\n        }\n      }\n\n      const itemIndex = sortSession.sortables.indexOf(item);\n\n      // don't move item at all if hovering over itself\n      if (sortSession.activeIndex === itemIndex) {\n        sortSession.finalIndex = sortSession.activeIndex;\n        return;\n      }\n\n      // adjust final drop index based on whether we're dropping drag target after or before it's original index\n      // this is needed, so we get the same index if target is dropped after current item or before next item\n      const dragDirection =\n        overIndex > sortSession.activeIndex ? 'after' : 'before';\n      if (dragDirection === 'after') {\n        sortSession.finalIndex =\n          sortSession.dropPosition === 'before' ? itemIndex - 1 : itemIndex;\n      } else {\n        sortSession.finalIndex =\n          sortSession.dropPosition === 'after' ? itemIndex + 1 : itemIndex;\n      }\n    }\n  },\n  onDragEnd: sortSession => {\n    clearLinePreview(sortSession);\n  },\n};\n\nfunction clearLinePreview(sortSession: SortSession) {\n  if (sortSession?.linePreviewEl) {\n    sortSession.linePreviewEl.style.borderBottomColor = '';\n    sortSession.linePreviewEl.style.borderTopColor = '';\n    sortSession.linePreviewEl = undefined;\n  }\n}\n\nfunction addLinePreview(\n  el: HTMLElement,\n  side: 'top' | 'bottom',\n  sortSession: SortSession,\n) {\n  const color = 'rgb(var(--be-primary))';\n  if (side === 'top') {\n    el.style.borderTopColor = color;\n  } else {\n    el.style.borderBottomColor = color;\n  }\n  if (sortSession) {\n    sortSession.linePreviewEl = el;\n  }\n}\n","import {clamp} from '../number/clamp';\n\nexport function moveItemInArray<T = any>(\n  array: T[],\n  fromIndex: number,\n  toIndex: number\n): T[] {\n  const from = clamp(fromIndex, 0, array.length - 1);\n  const to = clamp(toIndex, 0, array.length - 1);\n\n  if (from === to) {\n    return array;\n  }\n\n  const target = array[from];\n  const delta = to < from ? -1 : 1;\n\n  for (let i = from; i !== to; i += delta) {\n    array[i] = array[i + delta];\n  }\n\n  array[to] = target;\n\n  return array;\n}\n","export function moveItemInNewArray<T>(\n  array: T[],\n  from: number,\n  to: number\n): T[] {\n  const newArray = array.slice();\n  newArray.splice(\n    to < 0 ? newArray.length + to : to,\n    0,\n    newArray.splice(from, 1)[0]\n  );\n\n  return newArray;\n}\n","import {moveItemInArray} from '@common/utils/array/move-item-in-array';\nimport {droppables} from '@common/ui/interactions/dnd/drag-state';\nimport {moveItemInNewArray} from '@common/utils/array/move-item-in-new-array';\nimport type {SortSession} from '@common/ui/interactions/dnd/sortable/use-sortable';\nimport type {SortableStrategy} from '@common/ui/interactions/dnd/sortable/sortable-strategy';\n\nconst transition = 'transform 0.2s cubic-bezier(0.2, 0, 0, 1)';\n\nexport const sortableTransformStrategy: SortableStrategy = {\n  onDragStart: sortSession => {\n    sortSession.sortables.forEach((sortable, index) => {\n      const droppable = droppables.get(sortable);\n      if (!droppable?.ref.current) return;\n\n      droppable.ref.current.style.transition = transition;\n\n      if (sortSession?.activeIndex === index) {\n        droppable.ref.current.style.opacity = '0.4';\n      }\n    });\n  },\n  onDragEnter: (\n    sortSession: SortSession,\n    overIndex: number,\n    currentIndex: number,\n  ) => {\n    moveItemInArray(sortSession.sortables, currentIndex, overIndex);\n    const rects = sortSession.sortables.map(s => droppables.get(s)?.rect);\n\n    sortSession.sortables.forEach((sortable, index) => {\n      if (!sortSession) return;\n\n      const newRects = moveItemInNewArray(\n        rects,\n        overIndex,\n        sortSession.activeIndex,\n      );\n      const oldRect = rects[index];\n      const newRect = newRects[index];\n      const sortableTarget = droppables.get(sortable);\n\n      if (sortableTarget?.ref.current && newRect && oldRect) {\n        const x = newRect.left - oldRect.left;\n        const y = newRect.top - oldRect.top;\n        sortableTarget.ref.current.style.transform = `translate3d(${x}px, ${y}px, 0)`;\n      }\n    });\n\n    sortSession.finalIndex = overIndex;\n  },\n  onDragOver: () => {},\n  onDragEnd: sortSession => {\n    // clear any styles and transforms applied to sortables during sorting\n    sortSession.sortables.forEach(sortable => {\n      const droppable = droppables.get(sortable);\n      if (droppable?.ref.current) {\n        droppable.ref.current.style.transform = '';\n        droppable.ref.current.style.transition = '';\n        droppable.ref.current.style.opacity = '';\n        droppable.ref.current.style.zIndex = '';\n      }\n    });\n  },\n};\n","import {moveItemInArray} from '@common/utils/array/move-item-in-array';\nimport {droppables} from '@common/ui/interactions/dnd/drag-state';\nimport {SortableStrategy} from '@common/ui/interactions/dnd/sortable/sortable-strategy';\n\nexport const sortableMoveNodeStrategy: SortableStrategy = {\n  onDragStart: () => {},\n  onDragOver: () => {},\n  onDragEnter: (sortSession, overIndex: number, currentIndex: number) => {\n    const node = droppables.get(sortSession.sortables[currentIndex])?.ref\n      .current;\n    if (node) {\n      moveNode(node, currentIndex, overIndex);\n      moveItemInArray(sortSession.sortables, currentIndex, overIndex);\n      sortSession.finalIndex = overIndex;\n    }\n  },\n  onDragEnd: () => {},\n};\n\nfunction moveNode(el: HTMLElement, currentIndex: number, newIndex: number) {\n  const parentEl = el.parentElement!;\n  if (newIndex < 0) {\n    parentEl.prepend(el);\n  } else {\n    // if parent already contains this node, and we're changing\n    // node's index within parent, need to adjust index by one\n    if (currentIndex > -1 && currentIndex <= newIndex) {\n      newIndex++;\n    }\n    const ref = parentEl.children.item(newIndex);\n    if (ref) {\n      ref.before(el);\n    } else {\n      parentEl.append(el);\n    }\n  }\n}\n","import {DraggableId, DragPreviewRenderer, useDraggable} from '../use-draggable';\nimport {useDroppable} from '../use-droppable';\nimport {RefObject, useEffect} from 'react';\nimport {getScrollParent, mergeProps} from '@react-aria/utils';\nimport {droppables} from '../drag-state';\nimport {updateRects} from '@common/ui/interactions/dnd/update-rects';\nimport {sortableLineStrategy} from '@common/ui/interactions/dnd/sortable/sortable-line-strategy';\nimport {sortableTransformStrategy} from '@common/ui/interactions/dnd/sortable/sortable-transform-strategy';\nimport {sortableMoveNodeStrategy} from '@common/ui/interactions/dnd/sortable/sortable-move-node-strategy';\nimport {SortableStrategy} from '@common/ui/interactions/dnd/sortable/sortable-strategy';\n\nexport interface SortSession {\n  // items in this list will be moved when user is sorting\n  sortables: DraggableId[];\n\n  // sortable user started dragging to start this session\n  activeSortable: DraggableId;\n  activeIndex: number;\n\n  // final index sortable was dropped in and should be moved to\n  finalIndex: number;\n\n  // drop position for displaying line preview\n  dropPosition: DropPosition;\n  // element that currently has a line preview at the top or bottom\n  linePreviewEl?: HTMLElement;\n  scrollParent?: Element;\n  scrollListener: () => void;\n  ref: RefObject<HTMLElement>;\n}\n\nlet sortSession: null | SortSession = null;\n\nexport type DropPosition = 'before' | 'after' | null;\n\ntype StrategyName = 'line' | 'liveSort' | 'moveNode';\n\nconst strategies: Record<StrategyName, SortableStrategy> = {\n  line: sortableLineStrategy,\n  liveSort: sortableTransformStrategy,\n  moveNode: sortableMoveNodeStrategy,\n};\n\nexport interface UseSortableProps {\n  item: DraggableId;\n  items: DraggableId[];\n  onSortStart?: () => void;\n  onSortEnd?: (oldIndex: number, newIndex: number) => void;\n  onDragEnd?: () => void;\n  onDropPositionChange?: (dropPosition: DropPosition) => void;\n  ref: RefObject<HTMLElement>;\n  type: string;\n  preview?: RefObject<DragPreviewRenderer>;\n  strategy?: StrategyName;\n  disabled?: boolean;\n}\nexport function useSortable({\n  item,\n  items,\n  type,\n  ref,\n  onSortEnd,\n  onSortStart,\n  onDragEnd,\n  preview,\n  disabled,\n  onDropPositionChange,\n  strategy = 'liveSort',\n}: UseSortableProps) {\n  // todo: issue with sorting after scrolling menu editor item list\n\n  // update sortables and active index, in case we lazy load more items while sorting\n  useEffect(() => {\n    if (sortSession && sortSession.sortables.length !== items.length) {\n      sortSession.sortables = [...items];\n      sortSession.activeIndex = items.indexOf(item);\n    }\n  }, [items, item]);\n\n  const {draggableProps, dragHandleRef} = useDraggable({\n    id: item,\n    ref,\n    type,\n    preview,\n    disabled,\n    onDragStart: () => {\n      sortSession = {\n        sortables: [...items],\n        activeSortable: item,\n        activeIndex: items.indexOf(item),\n        finalIndex: items.indexOf(item),\n        dropPosition: null,\n        ref,\n        scrollParent: ref.current ? getScrollParent(ref.current) : undefined,\n        scrollListener: () => {\n          updateRects(droppables);\n        },\n      };\n      strategies[strategy].onDragStart(sortSession);\n\n      onSortStart?.();\n      sortSession.scrollParent?.addEventListener(\n        'scroll',\n        sortSession.scrollListener,\n      );\n    },\n    onDragEnd: () => {\n      if (!sortSession) return;\n\n      sortSession.dropPosition = null;\n      onDropPositionChange?.(sortSession.dropPosition);\n      if (sortSession.activeIndex !== sortSession.finalIndex) {\n        onSortEnd?.(sortSession.activeIndex, sortSession.finalIndex);\n      }\n      sortSession.scrollParent?.removeEventListener(\n        'scroll',\n        sortSession.scrollListener,\n      );\n      strategies[strategy].onDragEnd(sortSession);\n      // call \"onDragEnd\" after \"onSortEnd\", so listener has a chance to use sort session data\n      onDragEnd?.();\n      sortSession = null;\n    },\n    getData: () => {},\n  });\n\n  const {droppableProps} = useDroppable({\n    id: item,\n    ref,\n    types: [type],\n    disabled,\n    allowDragEventsFromItself: true,\n    onDragOver: (target, e) => {\n      if (!sortSession) return;\n      strategies[strategy].onDragOver({\n        e,\n        ref,\n        item,\n        sortSession,\n        onDropPositionChange,\n      });\n    },\n    onDragEnter: () => {\n      if (!sortSession) return;\n      const overIndex = sortSession.sortables.indexOf(item);\n      const oldIndex = sortSession.sortables.indexOf(\n        sortSession.activeSortable,\n      );\n      strategies[strategy].onDragEnter(sortSession, overIndex, oldIndex);\n    },\n    onDragLeave: () => {\n      if (!sortSession) return;\n      sortSession.dropPosition = null;\n      onDropPositionChange?.(sortSession.dropPosition);\n    },\n  });\n\n  return {\n    sortableProps: {...mergeProps(draggableProps, droppableProps)},\n    dragHandleRef,\n  };\n}\n","import React, {RefObject} from 'react';\n\nexport interface TabsContext {\n  selectedTab: number;\n  setSelectedTab: (newTab: number) => void;\n  tabsRef: RefObject<HTMLElement[]>;\n  size: 'sm' | 'md';\n  isLazy?: boolean;\n  id: string;\n}\n\nexport const TabContext = React.createContext<TabsContext>(null!);\n","import React, {useContext, useState} from 'react';\nimport {useLayoutEffect} from '@react-aria/utils';\nimport clsx from 'clsx';\nimport {TabContext} from './tabs-context';\n\ninterface TabLineStyle {\n  width?: string;\n  transform?: string;\n  className?: string;\n}\n\nexport function TabLine() {\n  const {tabsRef, selectedTab} = useContext(TabContext);\n  const [style, setStyle] = useState<TabLineStyle>({\n    width: undefined,\n    transform: undefined,\n    className: undefined,\n  });\n\n  useLayoutEffect(() => {\n    if (selectedTab != null && tabsRef.current) {\n      const el = tabsRef.current[selectedTab];\n      if (!el) return;\n\n      setStyle(prevState => {\n        return {\n          width: `${el.offsetWidth}px`,\n          transform: `translateX(${el.offsetLeft}px)`,\n          // disable initial transition for tabline\n          className: prevState.width === undefined ? '' : 'transition-all',\n        };\n      });\n    }\n  }, [setStyle, selectedTab, tabsRef]);\n\n  return (\n    <div\n      className={clsx(\n        'absolute bottom-0 left-0 h-2 bg-primary',\n        style.className\n      )}\n      role=\"presentation\"\n      style={{width: style.width, transform: style.transform}}\n    />\n  );\n}\n","import React, {Children, cloneElement, isValidElement, ReactNode} from 'react';\nimport clsx from 'clsx';\nimport {FocusScope} from '@react-aria/focus';\nimport {TabProps} from './tab';\nimport {TabLine} from './tab-line';\n\nexport interface TabListProps {\n  children: ReactNode;\n  // center tabs within tablist\n  center?: boolean;\n  // expand tabs to fill in tablist space fully. By default, tabs are only as wide as their content.\n  expand?: boolean;\n  className?: string;\n}\nexport function TabList({children, center, expand, className}: TabListProps) {\n  const childrenArray = Children.toArray(children);\n\n  return (\n    <FocusScope>\n      <div\n        className={clsx(\n          // hide scrollbar completely on mobile, show compact one on desktop\n          'flex relative max-w-full overflow-auto border-b max-sm:hidden-scrollbar md:compact-scrollbar',\n          className\n        )}\n        role=\"tablist\"\n        aria-orientation=\"horizontal\"\n      >\n        {childrenArray.map((child, index) => {\n          if (isValidElement<TabProps>(child)) {\n            return cloneElement<TabProps>(child, {\n              index,\n              className: clsx(\n                child.props.className,\n                expand && 'flex-auto',\n                center && index === 0 && 'ml-auto',\n                center && index === childrenArray.length - 1 && 'mr-auto'\n              ),\n            });\n          }\n          return null;\n        })}\n        <TabLine />\n      </div>\n    </FocusScope>\n  );\n}\n","import React, {JSXElementConstructor, ReactNode, useContext} from 'react';\nimport clsx from 'clsx';\nimport {useFocusManager} from '@react-aria/focus';\nimport {TabContext} from './tabs-context';\nimport {LinkProps} from 'react-router-dom';\n\nexport interface TabProps {\n  className?: string;\n  index?: number;\n  children: ReactNode;\n  isDisabled?: boolean;\n  padding?: string;\n  elementType?: 'button' | 'a' | JSXElementConstructor<any>;\n  to?: LinkProps['to'];\n  relative?: LinkProps['relative'];\n  replace?: LinkProps['replace'];\n  width?: string;\n}\nexport function Tab({\n  index,\n  className,\n  isDisabled,\n  children,\n  padding: paddingProp,\n  elementType = 'button',\n  to,\n  relative,\n  width = 'min-w-min',\n}: TabProps) {\n  const {\n    selectedTab,\n    setSelectedTab,\n    tabsRef,\n    size = 'md',\n    id,\n  } = useContext(TabContext);\n  const isSelected = index === selectedTab;\n  const focusManager = useFocusManager();\n  const padding = paddingProp || (size === 'sm' ? 'px-12' : 'px-18');\n\n  const mergedClassname = clsx(\n    'tracking-wide overflow-hidden capitalize text-sm flex items-center justify-center outline-none transition-colors',\n    'focus-visible:ring focus-visible:ring-2 ring-inset rounded whitespace-nowrap cursor-pointer',\n    width,\n    textColor({isDisabled, isSelected}),\n    className,\n    size === 'md' && `${padding} h-48`,\n    size === 'sm' && `${padding} h-32`,\n    isDisabled && 'pointer-events-none',\n  );\n\n  const onKeyDown = (e: React.KeyboardEvent<HTMLButtonElement>) => {\n    switch (e.key) {\n      case 'ArrowLeft':\n        focusManager?.focusPrevious();\n        break;\n      case 'ArrowRight':\n        focusManager?.focusNext();\n        break;\n      case 'Home':\n        focusManager?.focusFirst();\n        break;\n      case 'End':\n        focusManager?.focusLast();\n        break;\n    }\n  };\n\n  const tabIndex = isSelected ? 0 : -1;\n  const Element = elementType;\n\n  return (\n    <Element\n      disabled={isDisabled}\n      id={`${id}-${index}-tab`}\n      aria-controls={`${id}-${index}-tabpanel`}\n      type=\"button\"\n      role=\"tab\"\n      aria-selected={isSelected}\n      tabIndex={isDisabled ? undefined : tabIndex}\n      onKeyDown={onKeyDown}\n      onClick={() => {\n        setSelectedTab(index!);\n      }}\n      to={to}\n      relative={relative}\n      className={mergedClassname}\n      ref={(el: HTMLElement) => {\n        if (tabsRef.current && el) {\n          tabsRef.current[index!] = el;\n        }\n      }}\n    >\n      {children}\n    </Element>\n  );\n}\n\ninterface TextColorProps {\n  isDisabled?: boolean;\n  isSelected: boolean;\n}\nfunction textColor({isDisabled, isSelected}: TextColorProps): string {\n  if (isDisabled) {\n    return 'text-disabled cursor-default';\n  }\n  if (isSelected) {\n    return 'text-primary';\n  }\n  return 'text-muted hover:text-main';\n}\n","import React, {\n  Children,\n  cloneElement,\n  ComponentPropsWithoutRef,\n  isValidElement,\n  ReactElement,\n  ReactNode,\n  useContext,\n  useRef,\n  useState,\n} from 'react';\nimport clsx from 'clsx';\nimport {useLayoutEffect} from '@react-aria/utils';\nimport {getFocusableTreeWalker} from '@react-aria/focus';\nimport {TabContext} from './tabs-context';\n\nexport interface TabPanelsProps {\n  children: ReactNode;\n  className?: string;\n}\nexport function TabPanels({children, className}: TabPanelsProps) {\n  const {selectedTab, isLazy} = useContext(TabContext);\n\n  // filter out falsy values, in case of conditional rendering\n  const panelArray = Children.toArray(children).filter(p => !!p);\n\n  let rendered: ReactNode;\n  if (isLazy) {\n    const el = panelArray[selectedTab] as ReactElement;\n    rendered = isValidElement(el)\n      ? cloneElement<TabPanelProps>(panelArray[selectedTab] as ReactElement, {\n          index: selectedTab,\n        })\n      : null;\n  } else {\n    rendered = panelArray.map((panel, index) => {\n      if (isValidElement<TabPanelsProps>(panel)) {\n        const isSelected = index === selectedTab;\n        return cloneElement<TabPanelProps>(panel, {\n          index,\n          'aria-hidden': !isSelected,\n          className: !isSelected\n            ? clsx(panel.props.className, 'hidden')\n            : panel.props.className,\n        });\n      }\n      return null;\n    });\n  }\n\n  return <div className={className}>{rendered}</div>;\n}\n\ninterface TabPanelProps extends ComponentPropsWithoutRef<'div'> {\n  className?: string;\n  children: ReactNode;\n  index?: number;\n}\nexport function TabPanel({\n  className,\n  children,\n  index,\n  ...domProps\n}: TabPanelProps) {\n  const {id} = useContext(TabContext);\n\n  const [tabIndex, setTabIndex] = useState<number | undefined>(0);\n  const ref = useRef<HTMLDivElement>(null);\n\n  // The tabpanel should have tabIndex=0 when there are no tabbable elements within it.\n  // Otherwise, tabbing from the focused tab should go directly to the first tabbable element\n  // within the tabpanel.\n  useLayoutEffect(() => {\n    if (ref?.current) {\n      const update = () => {\n        // Detect if there are any tabbable elements and update the tabIndex accordingly.\n        const walker = getFocusableTreeWalker(ref.current!, {tabbable: true});\n        setTabIndex(walker.nextNode() ? undefined : 0);\n      };\n\n      update();\n\n      // Update when new elements are inserted, or the tabIndex/disabled attribute updates.\n      const observer = new MutationObserver(update);\n      observer.observe(ref.current, {\n        subtree: true,\n        childList: true,\n        attributes: true,\n        attributeFilter: ['tabIndex', 'disabled'],\n      });\n\n      return () => {\n        observer.disconnect();\n      };\n    }\n  }, [ref]);\n\n  return (\n    <div\n      tabIndex={tabIndex}\n      ref={ref}\n      id={`${id}-${index}-tabpanel`}\n      aria-labelledby={`${id}-${index}-tab`}\n      className={clsx(className, 'focus-visible:outline-primary-light')}\n      role=\"tabpanel\"\n      {...domProps}\n    >\n      {children}\n    </div>\n  );\n}\n","import React, {ReactElement, useId, useMemo, useRef} from 'react';\nimport clsx from 'clsx';\nimport {useControlledState} from '@react-stately/utils';\nimport {TabContext, TabsContext} from './tabs-context';\nimport {TabListProps} from './tab-list';\nimport {TabPanelsProps} from './tab-panels';\n\nexport interface TabsProps {\n  children: [ReactElement<TabListProps>, ReactElement<TabPanelsProps>];\n  size?: 'sm' | 'md';\n  className?: string;\n  selectedTab?: number;\n  defaultSelectedTab?: number;\n  onTabChange?: (newTab: number) => void;\n  isLazy?: boolean;\n  overflow?: string;\n}\n\nexport function Tabs(props: TabsProps) {\n  const {\n    size = 'md',\n    children,\n    className,\n    isLazy,\n    overflow = 'overflow-hidden',\n  } = props;\n\n  const tabsRef = useRef<HTMLButtonElement[]>([]);\n  const id = useId();\n\n  const [selectedTab, setSelectedTab] = useControlledState(\n    props.selectedTab,\n    props.defaultSelectedTab || 0,\n    props.onTabChange\n  );\n\n  const ContextValue: TabsContext = useMemo(() => {\n    return {\n      selectedTab,\n      setSelectedTab,\n      tabsRef,\n      size,\n      isLazy,\n      id,\n    };\n  }, [selectedTab, id, isLazy, setSelectedTab, size]);\n\n  return (\n    <TabContext.Provider value={ContextValue}>\n      <div className={clsx(className, overflow, 'max-w-full')}>{children}</div>\n    </TabContext.Provider>\n  );\n}\n","import {createPortal, flushSync} from 'react-dom';\nimport React, {useImperativeHandle, useRef, useState} from 'react';\nimport {ConnectedDraggable, DragPreviewRenderer} from './use-draggable';\nimport {rootEl} from '@common/core/root-el';\n\nexport interface DragPreviewProps {\n  children: (draggable: ConnectedDraggable) => JSX.Element;\n}\nexport const DragPreview = React.forwardRef<\n  DragPreviewRenderer,\n  DragPreviewProps\n>((props, ref) => {\n  const render = props.children;\n  const [children, setChildren] = useState<JSX.Element | null>(null);\n  const domRef = useRef<HTMLDivElement>(null!);\n\n  useImperativeHandle(\n    ref,\n    () =>\n      (\n        draggable: ConnectedDraggable,\n        callback: (node: HTMLElement) => void,\n      ) => {\n        // This will be called during the onDragStart event by useDrag. We need to render the\n        // preview synchronously before this event returns, so we can call event.dataTransfer.setDragImage.\n        flushSync(() => {\n          setChildren(render(draggable));\n        });\n\n        // Yield back to useDrag to set the drag image.\n        callback(domRef.current);\n\n        // Remove the preview from the DOM after a frame so the browser has time to paint.\n        requestAnimationFrame(() => {\n          setChildren(null);\n        });\n      },\n    [render],\n  );\n\n  if (!children) {\n    return null;\n  }\n\n  // portal preview, in case in needs to be used in <tr> or another element that does not accept div as child\n  return createPortal(\n    <div\n      style={{zIndex: -100, position: 'absolute', top: 0, left: -100000}}\n      ref={domRef}\n    >\n      {children}\n    </div>,\n    rootEl,\n  );\n});\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const MusicNoteIcon = createSvgIcon(\n  <path d=\"m12 3 .01 10.55c-.59-.34-1.27-.55-2-.55C7.79 13 6 14.79 6 17s1.79 4 4.01 4S14 19.21 14 17V7h4V3h-6zm-1.99 16c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z\" />\n, 'MusicNoteOutlined');\n","import {Track} from '@app/web-player/tracks/track';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport clsx from 'clsx';\nimport {MusicNoteIcon} from '@common/icons/material/MusicNote';\n\ninterface TrackImageProps {\n  track: Track;\n  className?: string;\n  size?: string;\n  background?: string;\n}\nexport function TrackImage({\n  track,\n  className,\n  size,\n  background = 'bg-fg-base/4',\n}: TrackImageProps) {\n  const {trans} = useTrans();\n  const src = getTrackImageSrc(track);\n  const imgClassName = clsx(\n    className,\n    size,\n    background,\n    'object-cover',\n    !src ? 'flex items-center justify-center' : 'block',\n  );\n  return src ? (\n    <img\n      className={imgClassName}\n      draggable={false}\n      loading=\"lazy\"\n      src={src}\n      alt={trans(message('Image for :name', {values: {name: track.name}}))}\n    />\n  ) : (\n    <span className={clsx(imgClassName, 'overflow-hidden')}>\n      <MusicNoteIcon className=\"max-w-[60%] text-divider\" size=\"text-9xl\" />\n    </span>\n  );\n}\n\nexport function getTrackImageSrc(track: Track) {\n  if (track.image) {\n    return track.image;\n  } else if (track.album?.image) {\n    return track.album.image;\n  }\n}\n","import {Fragment, memo} from 'react';\nimport {useTrans, UseTransReturn} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\n\ninterface ParsedMS {\n  days: number;\n  hours: number;\n  minutes: number;\n  seconds: number;\n}\n\ninterface FormattedTrackDurationProps {\n  ms?: number;\n  minutes?: number;\n  seconds?: number;\n  verbose?: boolean;\n  addZeroToFirstUnit?: boolean;\n}\nexport const FormattedDuration = memo(\n  ({\n    minutes,\n    seconds,\n    ms,\n    verbose = false,\n    addZeroToFirstUnit = true,\n  }: FormattedTrackDurationProps) => {\n    const {trans} = useTrans();\n\n    if (minutes) {\n      ms = minutes * 60000;\n    } else if (seconds) {\n      ms = seconds * 1000;\n    }\n    if (!ms) {\n      ms = 0;\n    }\n\n    const unsignedMs = ms < 0 ? -ms : ms;\n    const parsedMS: ParsedMS = {\n      days: Math.trunc(unsignedMs / 86400000),\n      hours: Math.trunc(unsignedMs / 3600000) % 24,\n      minutes: Math.trunc(unsignedMs / 60000) % 60,\n      seconds: Math.trunc(unsignedMs / 1000) % 60,\n    };\n\n    let formattedValue: string;\n    if (verbose) {\n      formattedValue = formatVerbose(parsedMS, trans);\n    } else {\n      formattedValue = formatCompact(parsedMS, addZeroToFirstUnit);\n    }\n\n    return <Fragment>{formattedValue}</Fragment>;\n  }\n);\n\nfunction formatVerbose(t: ParsedMS, trans: UseTransReturn['trans']) {\n  const output: string[] = [];\n\n  if (t.days) {\n    output.push(`${t.days}${trans(message('d'))}`);\n  }\n  if (t.hours) {\n    output.push(`${t.hours}${trans(message('hr'))}`);\n  }\n  if (t.minutes) {\n    output.push(`${t.minutes}${trans(message('min'))}`);\n  }\n  if (t.seconds && !t.hours) {\n    output.push(`${t.seconds}${trans(message('sec'))}`);\n  }\n\n  return output.join(' ');\n}\n\nfunction formatCompact(t: ParsedMS, addZeroToFirstUnit = true) {\n  const seconds = addZero(t.seconds);\n  let output = '';\n  if (t.days && !output) {\n    output = `${t.days}:${addZero(t.hours)}:${addZero(t.minutes)}:${seconds}`;\n  }\n  if (t.hours && !output) {\n    output = `${addZero(t.hours, addZeroToFirstUnit)}:${addZero(\n      t.minutes\n    )}:${seconds}`;\n  }\n  if (!output) {\n    output = `${addZero(t.minutes, addZeroToFirstUnit)}:${seconds}`;\n  }\n  return output;\n}\n\nfunction addZero(v: number, addZero = true) {\n  if (!addZero) return v;\n  let value = `${v}`;\n  if (value.length === 1) {\n    value = '0' + value;\n  }\n  return value;\n}\n","import {Link, LinkProps} from 'react-router-dom';\nimport clsx from 'clsx';\nimport React, {useMemo} from 'react';\nimport {slugifyString} from '@common/utils/string/slugify-string';\nimport {Track} from '@app/web-player/tracks/track';\nimport {getBootstrapData} from '@common/core/bootstrap-data/use-backend-bootstrap-data';\n\ninterface TrackLinkProps extends Omit<LinkProps, 'to'> {\n  track: Track;\n  className?: string;\n}\nexport function TrackLink({track, className, ...linkProps}: TrackLinkProps) {\n  const finalUri = useMemo(() => {\n    return getTrackLink(track);\n  }, [track]);\n\n  return (\n    <Link\n      {...linkProps}\n      className={clsx(\n        'hover:underline overflow-x-hidden overflow-ellipsis',\n        className\n      )}\n      to={finalUri}\n    >\n      {track.name}\n    </Link>\n  );\n}\n\nexport function getTrackLink(\n  track: Track,\n  {absolute}: {absolute?: boolean} = {}\n): string {\n  let link = `/track/${track.id}/${slugifyString(track.name)}`;\n  if (absolute) {\n    link = `${getBootstrapData().settings.base_url}${link}`;\n  }\n  return link;\n}\n","export const GENRE_MODEL = 'genre';\n\nexport interface Genre {\n  id: number;\n  name: string;\n  display_name: string;\n  model_type: 'genre';\n  image: string;\n}\n","export const WAVE_WIDTH = 1240;\nexport const WAVE_HEIGHT = 45;\nconst BAR_WIDTH = 3;\nconst BAR_GAP: number = 0.5;\n\nexport function generateWaveformData(file: File): Promise<number[][] | null> {\n  const audioContext = new window.AudioContext();\n  return new Promise((resolve, abort) => {\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n\n    if (!context) {\n      abort();\n      return;\n    }\n    canvas.width = WAVE_WIDTH;\n    canvas.height = WAVE_HEIGHT;\n\n    // read file buffer\n    const reader = new FileReader();\n    reader.onload = e => {\n      const buffer = e.target?.result;\n      if (!buffer) {\n        abort();\n      } else {\n        audioContext.decodeAudioData(\n          buffer as ArrayBuffer,\n          buffer => {\n            const waveData = extractBuffer(buffer, context);\n            resolve(waveData);\n          },\n          () => resolve(null)\n        );\n      }\n    };\n    reader.readAsArrayBuffer(file);\n  });\n}\n\nfunction extractBuffer(buffer: AudioBuffer, context: CanvasRenderingContext2D) {\n  const waveData: number[][] = [];\n  const channelData = buffer.getChannelData(0);\n  const sections = WAVE_WIDTH;\n  const len = Math.floor(channelData.length / sections);\n  const maxHeight = WAVE_HEIGHT;\n  const vals = [];\n  for (let i = 0; i < sections; i += BAR_WIDTH) {\n    vals.push(bufferMeasure(i * len, len, channelData) * 10000);\n  }\n\n  for (let j = 0; j < sections; j += BAR_WIDTH) {\n    const scale = maxHeight / Math.max(...vals);\n    let val = bufferMeasure(j * len, len, channelData) * 10000;\n    val *= scale;\n    val += 1;\n    waveData.push(getBarData(j, val));\n  }\n\n  // clear canvas for redrawing\n  context.clearRect(0, 0, WAVE_WIDTH, WAVE_HEIGHT);\n  return waveData;\n}\n\nfunction bufferMeasure(position: number, length: number, data: Float32Array) {\n  let sum = 0.0;\n  for (let i = position; i <= position + length - 1; i++) {\n    sum += Math.pow(data[i], 2);\n  }\n  return Math.sqrt(sum / data.length);\n}\n\nfunction getBarData(i: number, h: number) {\n  let w = BAR_WIDTH;\n  if (BAR_GAP !== 0) {\n    w *= Math.abs(1 - BAR_GAP);\n  }\n  const x = i + w / 2,\n    y = WAVE_HEIGHT - h;\n\n  return [x, y, w, h];\n}\n","import {Album} from '@app/web-player/albums/album';\n\nexport function assignAlbumToTracks(album: Album): Album {\n  album.tracks = album.tracks?.map(track => {\n    if (!track.album) {\n      track.album = {...album, tracks: undefined};\n    }\n    return track;\n  });\n  return album;\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useParams} from 'react-router-dom';\nimport {Track} from '@app/web-player/tracks/track';\nimport {assignAlbumToTracks} from '@app/web-player/albums/assign-album-to-tracks';\nimport {getBootstrapData} from '@common/core/bootstrap-data/use-backend-bootstrap-data';\n\nexport interface getTrackResponse extends BackendResponse {\n  track: Track;\n  loader: Params['loader'];\n}\n\ninterface Params {\n  loader: 'track' | 'trackPage' | 'editTrackPage';\n}\n\nexport function useTrack(params: Params) {\n  const {trackId} = useParams();\n  return useQuery({\n    queryKey: ['tracks', +trackId!, params],\n    queryFn: () => fetchTrack(trackId!, params),\n    initialData: () => {\n      const data = getBootstrapData().loaders?.[params.loader];\n      if (data?.track?.id == trackId && data?.loader === params.loader) {\n        return data;\n      }\n      return undefined;\n    },\n  });\n}\n\nfunction fetchTrack(trackId: number | string, params: Params) {\n  return apiClient\n    .get<getTrackResponse>(`tracks/${trackId}`, {params})\n    .then(response => {\n      if (response.data.track.album) {\n        response.data.track = {\n          ...response.data.track,\n          album: assignAlbumToTracks(response.data.track.album),\n        };\n      }\n      return response.data;\n    });\n}\n","import {useMemo} from 'react';\nimport {useAuth} from '@common/auth/use-auth';\nimport {Track} from '@app/web-player/tracks/track';\n\nexport function useTrackPermissions(tracks: (Track | undefined)[]) {\n  const {user, hasPermission} = useAuth();\n\n  return useMemo(() => {\n    const permissions = {\n      canEdit: true,\n      canDelete: true,\n      managesTrack: true,\n    };\n    tracks.every(track => {\n      if (!track) {\n        permissions.canEdit = false;\n        permissions.canDelete = false;\n        permissions.managesTrack = false;\n        return;\n      }\n\n      const trackArtistIds = track.artists?.map(a => a.id);\n      const managesTrack =\n        track.owner_id === user?.id ||\n        !!user?.artists?.find(a => trackArtistIds?.includes(a.id as number));\n\n      if (!managesTrack) {\n        permissions.managesTrack = false;\n      }\n\n      if (\n        !hasPermission('tracks.update') &&\n        !hasPermission('music.update') &&\n        !managesTrack\n      ) {\n        permissions.canEdit = false;\n      }\n\n      if (\n        !hasPermission('tracks.delete') &&\n        !hasPermission('music.delete') &&\n        !managesTrack\n      ) {\n        permissions.canDelete = false;\n      }\n    });\n    return permissions;\n  }, [user, tracks, hasPermission]);\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const AlbumIcon = createSvgIcon(\n  <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-12.5c-2.49 0-4.5 2.01-4.5 4.5s2.01 4.5 4.5 4.5 4.5-2.01 4.5-4.5-2.01-4.5-4.5-4.5zm0 5.5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z\" />\n, 'AlbumOutlined');\n","import {useTrans} from '@common/i18n/use-trans';\nimport {message} from '@common/i18n/message';\nimport {Album} from '@app/web-player/albums/album';\nimport clsx from 'clsx';\nimport {AlbumIcon} from '@common/icons/material/Album';\n\ninterface AlbumImageProps {\n  album: Album;\n  className?: string;\n  size?: string;\n}\nexport function AlbumImage({album, className, size}: AlbumImageProps) {\n  const {trans} = useTrans();\n  const src = album?.image;\n  const imgClassName = clsx(\n    className,\n    size,\n    'object-cover bg-fg-base/4',\n    !src ? 'flex items-center justify-center' : 'block',\n  );\n\n  return src ? (\n    <img\n      className={imgClassName}\n      draggable={false}\n      loading=\"lazy\"\n      src={src}\n      alt={trans(message('Image for :name', {values: {name: album.name}}))}\n    />\n  ) : (\n    <span className={clsx(imgClassName, 'overflow-hidden')}>\n      <AlbumIcon className=\"max-w-[60%] text-divider\" size=\"text-9xl\" />\n    </span>\n  );\n}\n","import {Link} from 'react-router-dom';\nimport clsx from 'clsx';\nimport React, {useMemo} from 'react';\nimport {Album} from '@app/web-player/albums/album';\nimport {Artist} from '@app/web-player/artists/artist';\nimport {slugifyString} from '@common/utils/string/slugify-string';\nimport {getBootstrapData} from '@common/core/bootstrap-data/use-backend-bootstrap-data';\n\ninterface AlbumLinkProps {\n  album: Album;\n  artist?: Artist;\n  className?: string;\n  target?: string;\n}\nexport function AlbumLink({album, artist, className, target}: AlbumLinkProps) {\n  if (!artist && album.artists) {\n    artist = album.artists[0];\n  }\n  const uri = useMemo(() => {\n    return getAlbumLink(album, {artist});\n  }, [artist, album]);\n\n  return (\n    <Link\n      target={target}\n      className={clsx(\n        'hover:underline outline-none focus-visible:underline overflow-x-hidden overflow-ellipsis',\n        className\n      )}\n      to={uri}\n    >\n      {album.name}\n    </Link>\n  );\n}\n\nexport function getAlbumLink(\n  album: Album,\n  options: {artist?: Artist; absolute?: boolean} = {}\n) {\n  const artist = options.artist || album.artists?.[0];\n  const artistName = slugifyString(artist?.name || 'Various Artists');\n  const albumName = slugifyString(album.name);\n  let link = `/album/${album.id}/${artistName}/${albumName}`;\n  if (options.absolute) {\n    link = `${getBootstrapData().settings.base_url}${link}`;\n  }\n  return link;\n}\n","import {Genre} from '../genres/genre';\nimport {Artist} from '../artists/artist';\nimport {Tag} from '@common/tags/tag';\nimport {Track} from '@app/web-player/tracks/track';\n\nexport const ALBUM_MODEL = 'album';\n\nexport interface Album {\n  id: number;\n  name: string;\n  model_type: typeof ALBUM_MODEL;\n  release_date?: string;\n  spotify_id?: string;\n  image?: string;\n  artists?: Omit<Artist, 'albums'>[];\n  reposts_count?: number;\n  likes_count?: number;\n  plays?: number;\n  views: number;\n  description?: string;\n  tracks?: Track[];\n  tags?: Tag[];\n  genres?: Genre[];\n  created_at?: string;\n  owner_id?: number;\n  comments_count?: number;\n  tracks_count?: number;\n  updated_at: string;\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useParams} from 'react-router-dom';\nimport {Album} from '@app/web-player/albums/album';\nimport {assignAlbumToTracks} from '@app/web-player/albums/assign-album-to-tracks';\nimport {getBootstrapData} from '@common/core/bootstrap-data/use-backend-bootstrap-data';\n\nexport interface GetAlbumResponse extends BackendResponse {\n  album: Album;\n  loader: Params['loader'];\n}\n\ninterface Params {\n  loader: 'albumPage' | 'editAlbumPage' | 'album' | 'albumEmbed';\n}\n\nexport function useAlbum(params: Params) {\n  const {albumId} = useParams();\n  return useQuery({\n    queryKey: ['albums', +albumId!],\n    queryFn: () => fetchAlbum(albumId!, params),\n    initialData: () => {\n      const data = getBootstrapData().loaders?.[params.loader];\n      if (data?.album?.id == albumId && data?.loader === params.loader) {\n        return data;\n      }\n      return undefined;\n    },\n  });\n}\n\nfunction fetchAlbum(albumId: number | string, params: Params) {\n  return apiClient\n    .get<GetAlbumResponse>(`albums/${albumId}`, {\n      params,\n    })\n    .then(response => {\n      response.data.album = assignAlbumToTracks(response.data.album);\n      return response.data;\n    });\n}\n","import {Album} from '@app/web-player/albums/album';\nimport {useMemo} from 'react';\nimport {useAuth} from '@common/auth/use-auth';\n\nexport function useAlbumPermissions(album?: Album) {\n  const {user, hasPermission} = useAuth();\n  return useMemo(() => {\n    const permissions = {\n      canEdit: false,\n      canDelete: false,\n      managesAlbum: false,\n    };\n    if (user?.id && album) {\n      const albumArtistIds = album.artists?.map(a => a.id);\n      const managesAlbum =\n        album.owner_id === user.id ||\n        !!user.artists?.find(a => albumArtistIds?.includes(a.id as number));\n\n      permissions.canEdit =\n        hasPermission('albums.update') ||\n        hasPermission('music.update') ||\n        managesAlbum;\n\n      permissions.canDelete =\n        hasPermission('albums.delete') ||\n        hasPermission('music.delete') ||\n        managesAlbum;\n\n      permissions.managesAlbum = managesAlbum;\n    }\n    return permissions;\n  }, [user, album, hasPermission]);\n}\n","import {useAuth} from '@common/auth/use-auth';\nimport {UserArtist} from '@app/web-player/user-profile/user-artist';\n\nexport function usePrimaryArtistForCurrentUser(): UserArtist | undefined {\n  const {user} = useAuth();\n  return user?.artists?.find(a => a.role === 'artist');\n}\n","import {Artist} from '@app/web-player/artists/artist';\nimport {ArtistLink} from '@app/web-player/artists/artist-link';\nimport {Fragment, HTMLAttributeAnchorTarget} from 'react';\nimport {Trans} from '@common/i18n/trans';\nimport clsx from 'clsx';\n\ninterface ArtistLinksProps {\n  artists?: Artist[];\n  className?: string;\n  linkClassName?: string;\n  target?: HTMLAttributeAnchorTarget;\n  onLinkClick?: () => void;\n}\nexport function ArtistLinks({\n  artists,\n  className,\n  target,\n  linkClassName,\n  onLinkClick,\n}: ArtistLinksProps) {\n  if (!artists?.length) {\n    return (\n      <div className={className}>\n        <Trans message=\"Various artists\" />\n      </div>\n    );\n  }\n  return (\n    <div className={clsx(className, 'overflow-x-hidden overflow-ellipsis')}>\n      {artists.map((artist, i) => (\n        <Fragment key={artist.id}>\n          {i > 0 && ', '}\n          <ArtistLink\n            artist={artist}\n            target={target}\n            className={linkClassName}\n            onClick={onLinkClick}\n          />\n        </Fragment>\n      ))}\n    </div>\n  );\n}\n","export type ShareableNetworks =\n  | 'facebook'\n  | 'twitter'\n  | 'pinterest'\n  | 'tumblr'\n  | 'blogger'\n  | 'mail';\n\nexport function shareLinkSocially(\n  network: ShareableNetworks,\n  link: string,\n  name?: string,\n  image?: string\n) {\n  const url = generateShareUrl(network, link, name, image);\n\n  if (network === 'mail') {\n    window.location.href = url;\n  } else {\n    openNewWindow(url);\n  }\n}\n\nfunction openNewWindow(url: string) {\n  const width = 575,\n    height = 400,\n    left = (window.innerWidth - width) / 2,\n    top = (window.innerHeight - height) / 2,\n    opts =\n      'status=1, scrollbars=1' +\n      ',width=' +\n      width +\n      ',height=' +\n      height +\n      ',top=' +\n      top +\n      ',left=' +\n      left;\n\n  window.open(url, 'share', opts);\n}\n\nfunction generateShareUrl(\n  type: ShareableNetworks,\n  link: string,\n  name?: string,\n  image?: string\n): string {\n  switch (type) {\n    case 'facebook':\n      return 'https://www.facebook.com/sharer/sharer.php?u=' + link;\n    case 'twitter':\n      return `https://twitter.com/intent/tweet?text=${name}&url=${link}`;\n    case 'pinterest':\n      return (\n        'https://pinterest.com/pin/create/button/?url=' +\n        link +\n        '&media=' +\n        image\n      );\n    case 'tumblr':\n      const base =\n        'https://www.tumblr.com/widgets/share/tool?shareSource=legacy&canonicalUrl=&posttype=photo&title=&caption=';\n      return base + name + '&content=' + image + '&url=' + link;\n    case 'blogger':\n      return (\n        'https://www.blogger.com/blog_this.pyra?t&u=' + link + '&n=' + name\n      );\n    case 'mail':\n      return `mailto:?subject=Check out this link.&body=${link}`;\n  }\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const TumblrIcon = createSvgIcon(\n  <path d=\"M390,32H120c-49.19,0-88,38.81-88,88V390c0,49.19,38.81,90,88,90H390c49.19,0,90-40.81,90-90V120C480,70.81,439.19,32,390,32ZM336,396H284c-42.51,0-72-23.68-72-76V240H176V192c42.51-11,57.95-48.32,60-80h44v72h52v56H280l-.39,70.51c0,21.87,11,29.43,28.62,29.43L336,340Z\" />\n);\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ShareIcon = createSvgIcon(\n  <path d=\"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92c0-1.61-1.31-2.92-2.92-2.92zM18 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM6 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm12 7.02c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z\" />\n, 'ShareOutlined');\n","import {\n  ShareableNetworks,\n  shareLinkSocially,\n} from '@common/utils/urls/share-link-socially';\nimport {IconButton, IconButtonProps} from '@common/ui/buttons/icon-button';\nimport {FacebookIcon} from '@common/icons/social/facebook';\nimport {TwitterIcon} from '@common/icons/social/twitter';\nimport {TumblrIcon} from '@common/icons/social/tumblr';\nimport {ShareIcon} from '@common/icons/material/Share';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\n\ninterface ShareButtonsProps {\n  link: string;\n  name?: string;\n  image?: string;\n  size?: IconButtonProps['size'];\n}\nexport function ShareMediaButtons({\n  link,\n  name,\n  image,\n  size = 'lg',\n}: ShareButtonsProps) {\n  const share = (network: ShareableNetworks) => {\n    shareLinkSocially(network, link, name, image);\n  };\n\n  return (\n    <div>\n      <IconButton\n        size={size}\n        onClick={() => share('facebook')}\n        className=\"text-facebook\"\n      >\n        <FacebookIcon />\n      </IconButton>\n      <IconButton\n        size={size}\n        onClick={() => share('twitter')}\n        className=\"text-twitter\"\n      >\n        <TwitterIcon />\n      </IconButton>\n      <IconButton\n        size={size}\n        onClick={() => share('tumblr')}\n        className=\"text-tumblr\"\n      >\n        <TumblrIcon viewBox=\"0 0 512 512\" />\n      </IconButton>\n      {navigator.share && (\n        <IconButton\n          size={size}\n          onClick={() => {\n            try {\n              navigator.share({\n                title: name,\n                url: link,\n              });\n            } catch (e) {\n              if ((e as DOMException).name !== 'AbortError') {\n                toast(message('Could not share link'));\n              }\n            }\n          }}\n          className=\"text-muted\"\n        >\n          <ShareIcon />\n        </IconButton>\n      )}\n    </div>\n  );\n}\n","import {Avatar, AvatarProps} from '@common/ui/images/avatar';\nimport {User} from '@common/auth/user';\nimport {useContext} from 'react';\nimport {SiteConfigContext} from '@common/core/settings/site-config-context';\n\ninterface UserAvatarProps extends Omit<AvatarProps, 'label' | 'src' | 'link'> {\n  user?: User;\n}\nexport function UserAvatar({user, ...props}: UserAvatarProps) {\n  const {auth} = useContext(SiteConfigContext);\n  return (\n    <Avatar\n      {...props}\n      label={user?.display_name}\n      src={user?.avatar}\n      link={user?.id && auth.getUserProfileLink?.(user)}\n    />\n  );\n}\n","import dot from 'dot-object';\n\nconst MAX_SAFE_INTEGER = 9007199254740991;\n\nexport function sortArrayOfObjects<T extends object>(\n  data: T[],\n  orderBy: string,\n  orderDir: 'asc' | 'desc' = 'desc'\n): T[] {\n  return data.sort((a, b) => {\n    let valueA = sortingDataAccessor(a, orderBy);\n    let valueB = sortingDataAccessor(b, orderBy);\n\n    // If there are data in the column that can be converted to a number,\n    // it must be ensured that the rest of the data\n    // is of the same type so as not to order incorrectly.\n    const valueAType = typeof valueA;\n    const valueBType = typeof valueB;\n\n    if (valueAType !== valueBType) {\n      if (valueAType === 'number') {\n        valueA += '';\n      }\n      if (valueBType === 'number') {\n        valueB += '';\n      }\n    }\n\n    // If both valueA and valueB exist (truthy), then compare the two. Otherwise, check if\n    // one value exists while the other doesn't. In this case, existing value should come last.\n    // This avoids inconsistent results when comparing values to undefined/null.\n    // If neither value exists, return 0 (equal).\n    let comparatorResult = 0;\n    if (valueA != null && valueB != null) {\n      // Check if one value is greater than the other; if equal, comparatorResult should remain 0.\n      if (valueA > valueB) {\n        comparatorResult = 1;\n      } else if (valueA < valueB) {\n        comparatorResult = -1;\n      }\n    } else if (valueA != null) {\n      comparatorResult = 1;\n    } else if (valueB != null) {\n      comparatorResult = -1;\n    }\n\n    return comparatorResult * (orderDir === 'asc' ? 1 : -1);\n  });\n}\n\n/**\n * Data accessor function that is used for accessing data properties for sorting through\n * the default sortData function.\n * This default function assumes that the sort header IDs (which defaults to the column name)\n * matches the data's properties (e.g. column Xyz represents data['Xyz']).\n * May be set to a custom function for different behavior.\n */\nfunction sortingDataAccessor(data: object, key: string): string {\n  const value = dot.pick(key, data);\n\n  if (isNumberValue(value)) {\n    const numberValue = Number(value);\n\n    // Numbers beyond `MAX_SAFE_INTEGER` can't be compared reliably, so we\n    // leave them as strings. For more info: https://goo.gl/y5vbSg\n    return numberValue < MAX_SAFE_INTEGER ? numberValue : value;\n  }\n\n  return value;\n}\n\nfunction isNumberValue(value: any): boolean {\n  // parseFloat(value) handles most of the cases we're interested in (it treats null, empty string,\n  // and other non-number values as NaN, where Number just uses 0) but it considers the string\n  // '123hello' to be a valid number. Therefore, we also check if Number(value) is NaN.\n  return !isNaN(parseFloat(value as any)) && !isNaN(Number(value));\n}\n","import {useMemo, useState} from 'react';\nimport {SortDescriptor} from '@common/ui/tables/types/sort-descriptor';\nimport {sortArrayOfObjects} from '@common/utils/array/sort-array-of-objects';\nimport {TableDataItem} from '@common/ui/tables/types/table-data-item';\nimport {TableProps} from '@common/ui/tables/table';\n\nexport function useSortableTableData<T extends TableDataItem>(\n  data?: T[]\n): {\n  data: T[];\n  sortDescriptor: TableProps<T>['sortDescriptor'];\n  onSortChange: TableProps<T>['onSortChange'];\n} {\n  const [sortDescriptor, onSortChange] = useState<SortDescriptor>({});\n  const sortedData: T[] = useMemo(() => {\n    if (!data) {\n      return [];\n    } else if (sortDescriptor?.orderBy) {\n      return sortArrayOfObjects(\n        [...data],\n        sortDescriptor.orderBy,\n        sortDescriptor.orderDir\n      );\n    }\n    return data;\n  }, [sortDescriptor, data]);\n  return {data: sortedData, sortDescriptor, onSortChange};\n}\n","import {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useMutation} from '@tanstack/react-query';\nimport {toast} from '@common/ui/toast/toast';\nimport {message} from '@common/i18n/message';\nimport {apiClient, queryClient} from '@common/http/query-client';\nimport {showHttpErrorToast} from '@common/utils/http/show-http-error-toast';\nimport {useLocation} from 'react-router-dom';\nimport {useNavigate} from '@common/utils/hooks/use-navigate';\nimport {useAuth} from '@common/auth/use-auth';\n\ninterface Response extends BackendResponse {}\n\ninterface Payload {\n  albumId: number;\n}\n\nexport function useDeleteAlbum() {\n  const {pathname} = useLocation();\n  const navigate = useNavigate();\n  const {getRedirectUri} = useAuth();\n\n  return useMutation({\n    mutationFn: (payload: Payload) => deleteAlbum(payload),\n    onSuccess: (response, {albumId}) => {\n      toast(message('Album deleted'));\n      // navigate to homepage if we are on this album page currently\n      if (pathname.startsWith(`/album/${albumId}`)) {\n        navigate(getRedirectUri());\n      }\n      queryClient.invalidateQueries({queryKey: ['tracks']});\n      queryClient.invalidateQueries({queryKey: ['albums']});\n      queryClient.invalidateQueries({queryKey: ['artists']});\n    },\n    onError: r => showHttpErrorToast(r),\n  });\n}\n\nfunction deleteAlbum({albumId}: Payload): Promise<Response> {\n  return apiClient.delete(`albums/${albumId}`).then(r => r.data);\n}\n","import {useFieldArray} from 'react-hook-form';\nimport {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\nimport {Trans} from '@common/i18n/trans';\nimport {IconButton} from '@common/ui/buttons/icon-button';\nimport {CloseIcon} from '@common/icons/material/Close';\nimport {Button} from '@common/ui/buttons/button';\nimport {AddIcon} from '@common/icons/material/Add';\nimport React from 'react';\nimport {UserLink} from '@app/web-player/user-profile/user-link';\n\nexport function ProfileLinksForm() {\n  const {fields, append, remove} = useFieldArray<{links: UserLink[]}>({\n    name: 'links',\n  });\n  return (\n    <div>\n      {fields.map((field, index) => {\n        return (\n          <div key={field.id} className=\"flex gap-10 mb-10 items-end\">\n            <FormTextField\n              required\n              type=\"url\"\n              label={<Trans message=\"URL\" />}\n              name={`links.${index}.url`}\n              size=\"sm\"\n              className=\"flex-auto\"\n            />\n            <FormTextField\n              required\n              label={<Trans message=\"Short title\" />}\n              name={`links.${index}.title`}\n              size=\"sm\"\n              className=\"flex-auto\"\n            />\n            <IconButton\n              size=\"sm\"\n              color=\"primary\"\n              className=\"flex-shrink-0\"\n              onClick={() => {\n                remove(index);\n              }}\n            >\n              <CloseIcon />\n            </IconButton>\n          </div>\n        );\n      })}\n      <Button\n        variant=\"text\"\n        color=\"primary\"\n        startIcon={<AddIcon />}\n        size=\"xs\"\n        onClick={() => {\n          append({url: '', title: ''});\n        }}\n      >\n        <Trans message=\"Add another link\" />\n      </Button>\n    </div>\n  );\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {apiClient} from '@common/http/query-client';\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\nimport {useParams} from 'react-router-dom';\nimport {Artist} from '@app/web-player/artists/artist';\nimport {PaginationResponse} from '@common/http/backend-response/pagination-response';\nimport {Album} from '@app/web-player/albums/album';\nimport {assignAlbumToTracks} from '@app/web-player/albums/assign-album-to-tracks';\nimport {Track} from '@app/web-player/tracks/track';\nimport {getBootstrapData} from '@common/core/bootstrap-data/use-backend-bootstrap-data';\n\nexport const albumLayoutKey = 'artistPage-albumLayout';\n\nexport interface UseArtistResponse extends BackendResponse {\n  artist: Artist;\n  albums?: PaginationResponse<Album>;\n  tracks?: PaginationResponse<Track>;\n  loader?: UseArtistParams['loader'];\n  selectedAlbumLayout?: string;\n}\n\nexport interface UseArtistParams {\n  loader: 'artistPage' | 'editArtistPage' | 'artist';\n}\n\nexport function useArtist(params: UseArtistParams) {\n  const {artistId} = useParams();\n  return useQuery({\n    queryKey: ['artists', artistId, params],\n    queryFn: () => fetchArtist(artistId!, params),\n    initialData: () => {\n      const data = getBootstrapData().loaders?.[params.loader];\n      if (data?.artist?.id == artistId && data?.loader === params.loader) {\n        return data;\n      }\n      return undefined;\n    },\n  });\n}\n\nfunction fetchArtist(\n  artistId: number | string,\n  params: object,\n): Promise<UseArtistResponse> {\n  return apiClient\n    .get<UseArtistResponse>(`artists/${artistId}`, {params})\n    .then(response => {\n      if (response.data.albums) {\n        response.data.albums.data = response.data.albums.data.map(album =>\n          assignAlbumToTracks(album),\n        );\n      }\n      return response.data;\n    });\n}\n","import {useMemo} from 'react';\nimport {useAuth} from '@common/auth/use-auth';\nimport {Artist} from '@app/web-player/artists/artist';\n\nexport function useArtistPermissions(artist: Artist) {\n  const {user, hasPermission} = useAuth();\n  return useMemo(() => {\n    const permissions = {\n      canEdit: false,\n      canDelete: false,\n    };\n    if (user?.id) {\n      const managesArtist = !!user.artists?.find(a => a.id === artist.id);\n\n      permissions.canEdit =\n        hasPermission('artists.update') ||\n        hasPermission('music.update') ||\n        managesArtist;\n\n      permissions.canDelete =\n        hasPermission('artists.delete') ||\n        hasPermission('music.delete') ||\n        managesArtist;\n    }\n    return permissions;\n  }, [user, artist, hasPermission]);\n}\n","import {parseColor} from '@react-stately/color';\n\nexport function themeValueToHex(value: string): string {\n  try {\n    return parseColor(`rgb(${value.split(' ').join(',')})`).toString('hex');\n  } catch (e) {\n    return value;\n  }\n}\n","import {createSvgIcon} from '@common/icons/create-svg-icon';\n\nexport const PlayArrowFilledIcon = createSvgIcon(\n  <path d=\"M8 19V5l11 7Z\" />,\n  'PlayArrowFilled'\n);\n"],"names":["getSizeClassName","target","m","_a","options","_b","sortSession","useLayoutEffect","addZero","buffer"],"mappings":"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"}